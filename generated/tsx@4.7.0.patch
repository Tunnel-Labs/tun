diff --git a/dist/cjs/index.cjs b/dist/cjs/index.cjs
index c81fa598119bd3d694a4aef75d67e9d1d76781cb..7eb1476954fe1a226fa7c04995b8cb14c9a2cdd9 100755
--- a/dist/cjs/index.cjs
+++ b/dist/cjs/index.cjs
@@ -1 +1,112 @@
-"use strict";var f=require("path"),P=require("fs"),a=require("module"),l=require("get-tsconfig"),g=require("../source-map.cjs"),d=require("../index-5d1f01e6.cjs"),j=require("../resolve-ts-path-3fca13b7.cjs"),q=require("../client-2f0df4a6.cjs");require("url"),require("esbuild"),require("crypto"),require("os"),require("../temporary-directory-2a027842.cjs"),require("net"),require("../get-pipe-path-86e97fc9.cjs");const E=s=>{if(s.includes("import")||s.includes("export"))try{return d.parseEsm(s)[3]}catch{return!0}return!1},M=/^\.{1,2}\//,O=/\.[cm]?tsx?$/,A=`${f.sep}node_modules${f.sep}`,u=process.env.TSX_TSCONFIG_PATH?{path:f.resolve(process.env.TSX_TSCONFIG_PATH),config:l.parseTsconfig(process.env.TSX_TSCONFIG_PATH)}:l.getTsconfig(),p=u&&l.createFilesMatcher(u),x=u&&l.createPathsMatcher(u),y=g.installSourceMapSupport(),m=a._extensions,N=m[".js"],R=[".cts",".mts",".ts",".tsx",".jsx"],b=[".js",".cjs",".mjs"];let v;q.connectingToServer.then(s=>{v=s},()=>{});const S=(s,e)=>{v&&v({type:"dependency",path:e});const n=R.some(r=>e.endsWith(r)),o=b.some(r=>e.endsWith(r));if(!n&&!o)return N(s,e);let t=P.readFileSync(e,"utf8");if(e.endsWith(".cjs")){const r=d.transformDynamicImport(e,t);r&&(t=y(r))}else if(n||E(t)){const r=d.transformSync(t,e,{tsconfigRaw:p==null?void 0:p(e)});t=y(r)}s._compile(t,e)};[".js",".ts",".tsx",".jsx"].forEach(s=>{m[s]=S}),Object.defineProperty(m,".mjs",{value:S,enumerable:!1});const T=a._resolveFilename.bind(a);a._resolveFilename=(s,e,n,o)=>{var t;const r=s.indexOf("?");if(r!==-1&&(s=s.slice(0,r)),x&&!M.test(s)&&!((t=e==null?void 0:e.filename)!=null&&t.includes(A))){const i=x(s);for(const h of i){const _=F(h,e,n,o);if(_)return _;try{return T(h,e,n,o)}catch{}}}const c=F(s,e,n,o);return c||T(s,e,n,o)};const F=(s,e,n,o)=>{const t=j.resolveTsPath(s);if(e!=null&&e.filename&&O.test(e.filename)&&t)for(const r of t)try{return T(r,e,n,o)}catch(c){const{code:i}=c;if(i!=="MODULE_NOT_FOUND"&&i!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw c}};
+const fs = require('fs');
+const path = require('path');
+const { isGlobSpecifier, createGlobfileManager } = require( 'glob-imports');
+const { createTildeImportExpander } = require( 'tilde-imports');
+const { getMonorepoDirpath } = require( 'get-monorepo-root');
+const { isFileEsmSync } = require( 'is-file-esm-ts');
+const { getMonorepoPackages } = require( 'monorepo-packages');
+const resolve = require('resolve.exports');
+const monorepoDirpath = getMonorepoDirpath(__dirname);
+if (monorepoDirpath === undefined) {
+	throw new Error('Could not find monorepo root');
+}
+
+const monorepoPackages = getMonorepoPackages({
+	monorepoDirpath
+});
+
+const expandTildeImport = createTildeImportExpander({
+	monorepoDirpath
+});
+const { getGlobfileContents, getGlobfilePath } = createGlobfileManager({
+	monorepoDirpath
+});
+
+const transformExtensions = [
+	'.js',
+	'.cjs',
+	'.cts',
+	'.mjs',
+	'.mts',
+	'.ts',
+	'.tsx',
+	'.jsx'
+];"use strict";var f=require("path"),P=require("fs"),a=require("module"),l=require("get-tsconfig"),g=require("../source-map.cjs"),d=require("../index-5d1f01e6.cjs"),j=require("../resolve-ts-path-3fca13b7.cjs"),q=require("../client-2f0df4a6.cjs");require("url"),require("esbuild"),require("crypto"),require("os"),require("../temporary-directory-2a027842.cjs"),require("net"),require("../get-pipe-path-86e97fc9.cjs");const E=s=>{if(s.includes("import")||s.includes("export"))try{return d.parseEsm(s)[3]}catch{return!0}return!1},M=/^\.{1,2}\//,O=/\.[cm]?tsx?$/,A=`${f.sep}node_modules${f.sep}`,u=process.env.TSX_TSCONFIG_PATH?{path:f.resolve(process.env.TSX_TSCONFIG_PATH),config:l.parseTsconfig(process.env.TSX_TSCONFIG_PATH)}:l.getTsconfig(),p=u&&l.createFilesMatcher(u),x=u&&l.createPathsMatcher(u),y=g.installSourceMapSupport(),m=a._extensions,N=m[".js"],R=[".cts",".mts",".ts",".tsx",".jsx"],b=[".js",".cjs",".mjs"];let v;q.connectingToServer.then(s=>{v=s},()=>{});const S=(s,e)=>{
+	let [module, filePath] = [s,e];
+	if (path.basename(filePath).startsWith('__virtual__:')) {
+		const virtualFileContents = getGlobfileContents({
+			globfilePath: filePath,
+			moduleType: 'commonjs',
+			filepathType: 'absolute'
+		});
+
+		module._compile(virtualFileContents, filePath);
+		return;
+	}
+
+	const shouldTransformFile = transformExtensions.some((extension) =>
+		filePath.endsWith(extension)
+	);
+	if (!shouldTransformFile) {
+		return N(module, filePath);
+	}
+
+	let code = fs.readFileSync(filePath, 'utf8');
+
+	if (filePath.includes('/node_modules/')) {
+		try {
+			if (isFileEsmSync(filePath)) {
+				const transformed = d.transformSync(code, filePath, { format: 'cjs' });
+				code = y(transformed, filePath);
+			}
+		} catch (e){
+			console.error(e)
+			// Ignore invalid file extension issues
+		}
+
+		module._compile(code, filePath);
+		return;
+	}
+v&&v({type:"dependency",path:e});const n=R.some(r=>e.endsWith(r)),o=b.some(r=>e.endsWith(r));if(!n&&!o)return N(s,e);let t=P.readFileSync(e,"utf8");if(e.endsWith(".cjs")){const r=d.transformDynamicImport(e,t);r&&(t=y(r))}else if(n||E(t)){const r=d.transformSync(t,e,{tsconfigRaw:p==null?void 0:p(e)});t=y(r)}s._compile(t,e)};[".js",".ts",".tsx",".jsx"].forEach(s=>{m[s]=S}),Object.defineProperty(m,".mjs",{value:S,enumerable:!1,
+// We set this property as enumerable so other packages can overwrite it if needed instead of erroring
+writable: true,
+configurable: true,});const T=a._resolveFilename.bind(a);a._resolveFilename=(s,e,n,o)=>{
+	const [request, parent, isMain, options] = [s,e,n,o];
+	if (parent && isGlobSpecifier(request)) {
+		return getGlobfilePath({
+			globfileModuleSpecifier: request,
+			importerFilepath: parent.filename
+		});
+	}
+
+	if (parent && parent.filename !== null && request.startsWith('~')) {
+		s = expandTildeImport({
+			importSpecifier: request,
+			importerFilepath: parent.filename
+		});
+	}
+
+	if (request.startsWith('@-/')) {
+		const packageSlug = request.match(/@-\/([^/]+)/)?.[1];
+		if (packageSlug === undefined) {
+			throw new Error(
+				`Could not extract monorepo package slug from "${request}"`
+			);
+		}
+
+		const packageMetadata = monorepoPackages[`@-/${packageSlug}`];
+		if (packageMetadata === undefined) {
+			throw new Error(`Could not find monorepo package "${request}"`);
+		}
+
+		const { packageDirpath, packageJson } = packageMetadata;
+
+		const relativeImportPath = request.replace(`@-/${packageSlug}`, '.');
+		const relativeFilePaths =
+			resolve.exports(packageJson, relativeImportPath) ?? [];
+
+		if (relativeFilePaths.length > 0) {
+			return path.join(packageDirpath, relativeFilePaths[0]);
+		}
+	}
+var t;const r=s.indexOf("?");if(r!==-1&&(s=s.slice(0,r)),x&&!M.test(s)&&!((t=e==null?void 0:e.filename)!=null&&t.includes(A))){const i=x(s);for(const h of i){const _=F(h,e,n,o);if(_)return _;try{return T(h,e,n,o)}catch{}}}const c=F(s,e,n,o);return c||T(s,e,n,o)};const F=(s,e,n,o)=>{const t=j.resolveTsPath(s);if(e!=null&&e.filename&&O.test(e.filename)&&t)for(const r of t)try{return T(r,e,n,o)}catch(c){const{code:i}=c;if(i!=="MODULE_NOT_FOUND"&&i!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw c}};
diff --git a/dist/cjs/index.mjs b/dist/cjs/index.mjs
index cd6f75632c9bb0f802b05959b8bfe534f565d675..0caf89772e805eb12649a57f35471249a2b5abf3 100755
--- a/dist/cjs/index.mjs
+++ b/dist/cjs/index.mjs
@@ -1 +1,112 @@
-import f from"path";import x from"fs";import m from"module";import{parseTsconfig as F,getTsconfig as j,createFilesMatcher as E,createPathsMatcher as O}from"get-tsconfig";import{installSourceMapSupport as P}from"../source-map.mjs";import{p as M,t as g,a as A}from"../index-bd1ceb03.mjs";import{r as N}from"../resolve-ts-path-eb3847f5.mjs";import{c as R}from"../client-e665d820.mjs";import"url";import"esbuild";import"crypto";import"os";import"../temporary-directory-04b36185.mjs";import"net";import"../get-pipe-path-b74d9893.mjs";const b=t=>{if(t.includes("import")||t.includes("export"))try{return M(t)[3]}catch{return!0}return!1},I=/^\.{1,2}\//,C=/\.[cm]?tsx?$/,D=`${f.sep}node_modules${f.sep}`,a=process.env.TSX_TSCONFIG_PATH?{path:f.resolve(process.env.TSX_TSCONFIG_PATH),config:F(process.env.TSX_TSCONFIG_PATH)}:j(),h=a&&E(a),_=a&&O(a),v=P(),l=m._extensions,G=l[".js"],H=[".cts",".mts",".ts",".tsx",".jsx"],X=[".js",".cjs",".mjs"];let p;R.then(t=>{p=t},()=>{});const y=(t,s)=>{p&&p({type:"dependency",path:s});const r=H.some(o=>s.endsWith(o)),n=X.some(o=>s.endsWith(o));if(!r&&!n)return G(t,s);let e=x.readFileSync(s,"utf8");if(s.endsWith(".cjs")){const o=g(s,e);o&&(e=v(o))}else if(r||b(e)){const o=A(e,s,{tsconfigRaw:h==null?void 0:h(s)});e=v(o)}t._compile(e,s)};[".js",".ts",".tsx",".jsx"].forEach(t=>{l[t]=y}),Object.defineProperty(l,".mjs",{value:y,enumerable:!1});const d=m._resolveFilename.bind(m);m._resolveFilename=(t,s,r,n)=>{var e;const o=t.indexOf("?");if(o!==-1&&(t=t.slice(0,o)),_&&!I.test(t)&&!((e=s==null?void 0:s.filename)!=null&&e.includes(D))){const i=_(t);for(const u of i){const T=S(u,s,r,n);if(T)return T;try{return d(u,s,r,n)}catch{}}}const c=S(t,s,r,n);return c||d(t,s,r,n)};const S=(t,s,r,n)=>{const e=N(t);if(s!=null&&s.filename&&C.test(s.filename)&&e)for(const o of e)try{return d(o,s,r,n)}catch(c){const{code:i}=c;if(i!=="MODULE_NOT_FOUND"&&i!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw c}};
+import path from 'path';
+import fs from 'fs';
+import { isGlobSpecifier, createGlobfileManager } from 'glob-imports';
+import { createTildeImportExpander } from 'tilde-imports';
+import { getMonorepoDirpath } from 'get-monorepo-root';
+import { isFileEsmSync } from 'is-file-esm-ts';
+import { getMonorepoPackages } from 'monorepo-packages';
+import resolve from 'resolve.exports';
+const monorepoDirpath = getMonorepoDirpath(import.meta.url);
+if (monorepoDirpath === undefined) {
+	throw new Error('Could not find monorepo root');
+}
+
+const monorepoPackages = getMonorepoPackages({
+	monorepoDirpath
+});
+
+const expandTildeImport = createTildeImportExpander({
+	monorepoDirpath
+});
+const { getGlobfileContents, getGlobfilePath } = createGlobfileManager({
+	monorepoDirpath
+});
+
+const transformExtensions = [
+	'.js',
+	'.cjs',
+	'.cts',
+	'.mjs',
+	'.mts',
+	'.ts',
+	'.tsx',
+	'.jsx'
+];import f from"path";import x from"fs";import m from"module";import{parseTsconfig as F,getTsconfig as j,createFilesMatcher as E,createPathsMatcher as O}from"get-tsconfig";import{installSourceMapSupport as P}from"../source-map.mjs";import{p as M,t as g,a as A}from"../index-bd1ceb03.mjs";import{r as N}from"../resolve-ts-path-eb3847f5.mjs";import{c as R}from"../client-e665d820.mjs";import"url";import"esbuild";import"crypto";import"os";import"../temporary-directory-04b36185.mjs";import"net";import"../get-pipe-path-b74d9893.mjs";const b=t=>{if(t.includes("import")||t.includes("export"))try{return M(t)[3]}catch{return!0}return!1},I=/^\.{1,2}\//,C=/\.[cm]?tsx?$/,D=`${f.sep}node_modules${f.sep}`,a=process.env.TSX_TSCONFIG_PATH?{path:f.resolve(process.env.TSX_TSCONFIG_PATH),config:F(process.env.TSX_TSCONFIG_PATH)}:j(),h=a&&E(a),_=a&&O(a),v=P(),l=m._extensions,G=l[".js"],H=[".cts",".mts",".ts",".tsx",".jsx"],X=[".js",".cjs",".mjs"];let p;R.then(t=>{p=t},()=>{});const y=(t,s)=>{
+	let [module, filePath] = [t,s];
+	if (path.basename(filePath).startsWith('__virtual__:')) {
+		const virtualFileContents = getGlobfileContents({
+			globfilePath: filePath,
+			moduleType: 'commonjs',
+			filepathType: 'absolute'
+		});
+
+		module._compile(virtualFileContents, filePath);
+		return;
+	}
+
+	const shouldTransformFile = transformExtensions.some((extension) =>
+		filePath.endsWith(extension)
+	);
+	if (!shouldTransformFile) {
+		return G(module, filePath);
+	}
+
+	let code = fs.readFileSync(filePath, 'utf8');
+
+	if (filePath.includes('/node_modules/')) {
+		try {
+			if (isFileEsmSync(filePath)) {
+				const transformed = A(code, filePath, { format: 'cjs' });
+				code = v(transformed, filePath);
+			}
+		} catch (e){
+			console.error(e)
+			// Ignore invalid file extension issues
+		}
+
+		module._compile(code, filePath);
+		return;
+	}
+p&&p({type:"dependency",path:s});const r=H.some(o=>s.endsWith(o)),n=X.some(o=>s.endsWith(o));if(!r&&!n)return G(t,s);let e=x.readFileSync(s,"utf8");if(s.endsWith(".cjs")){const o=g(s,e);o&&(e=v(o))}else if(r||b(e)){const o=A(e,s,{tsconfigRaw:h==null?void 0:h(s)});e=v(o)}t._compile(e,s)};[".js",".ts",".tsx",".jsx"].forEach(t=>{l[t]=y}),Object.defineProperty(l,".mjs",{value:y,enumerable:!1,
+// We set this property as enumerable so other packages can overwrite it if needed instead of erroring
+writable: true,
+configurable: true,});const d=m._resolveFilename.bind(m);m._resolveFilename=(t,s,r,n)=>{
+	const [request, parent, isMain, options] = [t,s,r,n];
+	if (parent && isGlobSpecifier(request)) {
+		return getGlobfilePath({
+			globfileModuleSpecifier: request,
+			importerFilepath: parent.filename
+		});
+	}
+
+	if (parent && parent.filename !== null && request.startsWith('~')) {
+		t = expandTildeImport({
+			importSpecifier: request,
+			importerFilepath: parent.filename
+		});
+	}
+
+	if (request.startsWith('@-/')) {
+		const packageSlug = request.match(/@-\/([^/]+)/)?.[1];
+		if (packageSlug === undefined) {
+			throw new Error(
+				`Could not extract monorepo package slug from "${request}"`
+			);
+		}
+
+		const packageMetadata = monorepoPackages[`@-/${packageSlug}`];
+		if (packageMetadata === undefined) {
+			throw new Error(`Could not find monorepo package "${request}"`);
+		}
+
+		const { packageDirpath, packageJson } = packageMetadata;
+
+		const relativeImportPath = request.replace(`@-/${packageSlug}`, '.');
+		const relativeFilePaths =
+			resolve.exports(packageJson, relativeImportPath) ?? [];
+
+		if (relativeFilePaths.length > 0) {
+			return path.join(packageDirpath, relativeFilePaths[0]);
+		}
+	}
+var e;const o=t.indexOf("?");if(o!==-1&&(t=t.slice(0,o)),_&&!I.test(t)&&!((e=s==null?void 0:s.filename)!=null&&e.includes(D))){const i=_(t);for(const u of i){const T=S(u,s,r,n);if(T)return T;try{return d(u,s,r,n)}catch{}}}const c=S(t,s,r,n);return c||d(t,s,r,n)};const S=(t,s,r,n)=>{const e=N(t);if(s!=null&&s.filename&&C.test(s.filename)&&e)for(const o of e)try{return d(o,s,r,n)}catch(c){const{code:i}=c;if(i!=="MODULE_NOT_FOUND"&&i!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw c}};
diff --git a/dist/cli.cjs b/dist/cli.cjs
index 18134f0f5b971cb11ef6a0e06c455dff03e68022..d6cab89bafbc7faf2f5827de5bf8616a2f5770d7 100755
--- a/dist/cli.cjs
+++ b/dist/cli.cjs
@@ -49,6 +49,6 @@
  * Copyright (c) 2014-present, Jon Schlinkert.
  * Licensed under the MIT License.
  */const ZD=_e,Ms=QD,Ws=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),JD=t=>e=>t===!0?Number(e):String(e),Qt=t=>typeof t=="number"||typeof t=="string"&&t!=="",ve=t=>Number.isInteger(+t),Zt=t=>{let e=`${t}`,u=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++u]==="0";);return u>0},eo=(t,e,u)=>typeof t=="string"||typeof e=="string"?!0:u.stringify===!0,to=(t,e,u)=>{if(e>0){let s=t[0]==="-"?"-":"";s&&(t=t.slice(1)),t=s+t.padStart(s?e-1:e,"0")}return u===!1?String(t):t},Gs=(t,e)=>{let u=t[0]==="-"?"-":"";for(u&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return u?"-"+t:t},uo=(t,e)=>{t.negatives.sort((i,D)=>i<D?-1:i>D?1:0),t.positives.sort((i,D)=>i<D?-1:i>D?1:0);let u=e.capture?"":"?:",s="",n="",r;return t.positives.length&&(s=t.positives.join("|")),t.negatives.length&&(n=`-(${u}${t.negatives.join("|")})`),s&&n?r=`${s}|${n}`:r=s||n,e.wrap?`(${u}${r})`:r},js=(t,e,u,s)=>{if(u)return Ms(t,e,{wrap:!1,...s});let n=String.fromCharCode(t);if(t===e)return n;let r=String.fromCharCode(e);return`[${n}-${r}]`},Us=(t,e,u)=>{if(Array.isArray(t)){let s=u.wrap===!0,n=u.capture?"":"?:";return s?`(${n}${t.join("|")})`:t.join("|")}return Ms(t,e,u)},Ks=(...t)=>new RangeError("Invalid range arguments: "+ZD.inspect(...t)),Vs=(t,e,u)=>{if(u.strictRanges===!0)throw Ks([t,e]);return[]},so=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},no=(t,e,u=1,s={})=>{let n=Number(t),r=Number(e);if(!Number.isInteger(n)||!Number.isInteger(r)){if(s.strictRanges===!0)throw Ks([t,e]);return[]}n===0&&(n=0),r===0&&(r=0);let i=n>r,D=String(t),o=String(e),a=String(u);u=Math.max(Math.abs(u),1);let c=Zt(D)||Zt(o)||Zt(a),f=c?Math.max(D.length,o.length,a.length):0,l=c===!1&&eo(t,e,s)===!1,E=s.transform||JD(l);if(s.toRegex&&u===1)return js(Gs(t,f),Gs(e,f),!0,s);let p={negatives:[],positives:[]},F=N=>p[N<0?"negatives":"positives"].push(Math.abs(N)),A=[],B=0;for(;i?n>=r:n<=r;)s.toRegex===!0&&u>1?F(n):A.push(to(E(n,B),f,l)),n=i?n-u:n+u,B++;return s.toRegex===!0?u>1?uo(p,s):Us(A,null,{wrap:!1,...s}):A},ro=(t,e,u=1,s={})=>{if(!ve(t)&&t.length>1||!ve(e)&&e.length>1)return Vs(t,e,s);let n=s.transform||(l=>String.fromCharCode(l)),r=`${t}`.charCodeAt(0),i=`${e}`.charCodeAt(0),D=r>i,o=Math.min(r,i),a=Math.max(r,i);if(s.toRegex&&u===1)return js(o,a,!1,s);let c=[],f=0;for(;D?r>=i:r<=i;)c.push(n(r,f)),r=D?r-u:r+u,f++;return s.toRegex===!0?Us(c,null,{wrap:!1,options:s}):c},st=(t,e,u,s={})=>{if(e==null&&Qt(t))return[t];if(!Qt(t)||!Qt(e))return Vs(t,e,s);if(typeof u=="function")return st(t,e,1,{transform:u});if(Ws(u))return st(t,e,0,u);let n={...s};return n.capture===!0&&(n.wrap=!0),u=u||n.step||1,ve(u)?ve(t)&&ve(e)?no(t,e,u,n):ro(t,e,Math.max(Math.abs(u),1),n):u!=null&&!Ws(u)?so(u,n):st(t,e,1,u)};var zs=st;const io=zs,Ys=ut,Do=(t,e={})=>{let u=(s,n={})=>{let r=Ys.isInvalidBrace(n),i=s.invalid===!0&&e.escapeInvalid===!0,D=r===!0||i===!0,o=e.escapeInvalid===!0?"\\":"",a="";if(s.isOpen===!0||s.isClose===!0)return o+s.value;if(s.type==="open")return D?o+s.value:"(";if(s.type==="close")return D?o+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":D?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){let c=Ys.reduce(s.nodes),f=io(...c,{...e,wrap:!1,toRegex:!0});if(f.length!==0)return c.length>1&&f.length>1?`(${f})`:f}if(s.nodes)for(let c of s.nodes)a+=u(c,s);return a};return u(t)};var oo=Do;const ao=zs,qs=qt,pe=ut,ae=(t="",e="",u=!1)=>{let s=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return u?pe.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let r of n)s.push(ae(r,e,u));else for(let r of e)u===!0&&typeof r=="string"&&(r=`{${r}}`),s.push(Array.isArray(r)?ae(n,r,u):n+r);return pe.flatten(s)},lo=(t,e={})=>{let u=e.rangeLimit===void 0?1e3:e.rangeLimit,s=(n,r={})=>{n.queue=[];let i=r,D=r.queue;for(;i.type!=="brace"&&i.type!=="root"&&i.parent;)i=i.parent,D=i.queue;if(n.invalid||n.dollar){D.push(ae(D.pop(),qs(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){D.push(ae(D.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let f=pe.reduce(n.nodes);if(pe.exceedsLimit(...f,e.step,u))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=ao(...f,e);l.length===0&&(l=qs(n,e)),D.push(ae(D.pop(),l)),n.nodes=[];return}let o=pe.encloseBrace(n),a=n.queue,c=n;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,a=c.queue;for(let f=0;f<n.nodes.length;f++){let l=n.nodes[f];if(l.type==="comma"&&n.type==="brace"){f===1&&a.push(""),a.push("");continue}if(l.type==="close"){D.push(ae(D.pop(),a,o));continue}if(l.value&&l.type!=="open"){a.push(ae(a.pop(),l.value));continue}l.nodes&&s(l,n)}return a};return pe.flatten(s(t))};var co=lo,fo={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
-`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const ho=qt,{MAX_LENGTH:Xs,CHAR_BACKSLASH:Jt,CHAR_BACKTICK:Eo,CHAR_COMMA:po,CHAR_DOT:Co,CHAR_LEFT_PARENTHESES:Fo,CHAR_RIGHT_PARENTHESES:go,CHAR_LEFT_CURLY_BRACE:mo,CHAR_RIGHT_CURLY_BRACE:_o,CHAR_LEFT_SQUARE_BRACKET:Qs,CHAR_RIGHT_SQUARE_BRACKET:Zs,CHAR_DOUBLE_QUOTE:Ao,CHAR_SINGLE_QUOTE:yo,CHAR_NO_BREAK_SPACE:wo,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ro}=fo,bo=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},s=typeof u.maxLength=="number"?Math.min(Xs,u.maxLength):Xs;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let n={type:"root",input:t,nodes:[]},r=[n],i=n,D=n,o=0,a=t.length,c=0,f=0,l;const E=()=>t[c++],p=F=>{if(F.type==="text"&&D.type==="dot"&&(D.type="text"),D&&D.type==="text"&&F.type==="text"){D.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=D,D=F,F};for(p({type:"bos"});c<a;)if(i=r[r.length-1],l=E(),!(l===Ro||l===wo)){if(l===Jt){p({type:"text",value:(e.keepEscaping?l:"")+E()});continue}if(l===Zs){p({type:"text",value:"\\"+l});continue}if(l===Qs){o++;let F;for(;c<a&&(F=E());){if(l+=F,F===Qs){o++;continue}if(F===Jt){l+=E();continue}if(F===Zs&&(o--,o===0))break}p({type:"text",value:l});continue}if(l===Fo){i=p({type:"paren",nodes:[]}),r.push(i),p({type:"text",value:l});continue}if(l===go){if(i.type!=="paren"){p({type:"text",value:l});continue}i=r.pop(),p({type:"text",value:l}),i=r[r.length-1];continue}if(l===Ao||l===yo||l===Eo){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=E());){if(A===Jt){l+=A+E();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}p({type:"text",value:l});continue}if(l===mo){f++;let A={type:"brace",open:!0,close:!1,dollar:D.value&&D.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=p(A),r.push(i),p({type:"open",value:l});continue}if(l===_o){if(i.type!=="brace"){p({type:"text",value:l});continue}let F="close";i=r.pop(),i.close=!0,p({type:F,value:l}),f--,i=r[r.length-1];continue}if(l===po&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:ho(i)}]}p({type:"comma",value:l}),i.commas++;continue}if(l===Co&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){p({type:"text",value:l});continue}if(D.type==="dot"){if(i.range=[],D.value+=l,D.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,D.type="text";continue}i.ranges++,i.args=[];continue}if(D.type==="range"){F.pop();let A=F[F.length-1];A.value+=D.value+l,D=A,i.ranges--;continue}p({type:"dot",value:l});continue}p({type:"text",value:l})}do if(i=r.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=r[r.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(r.length>0);return p({type:"eos"}),n};var vo=bo;const Js=qt,Bo=oo,So=co,$o=vo,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let s of t){let n=Y.create(s,e);Array.isArray(n)?u.push(...n):u.push(n)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>$o(t,e),Y.stringify=(t,e={})=>Js(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),Bo(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=So(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var To=Y,xo=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"],Oo=xo;const No=K,Ho=Oo,Lo=new Set(Ho);var Io=t=>Lo.has(No.extname(t).slice(1).toLowerCase()),nt={};(function(t){const{sep:e}=K,{platform:u}=process,s=me;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=n=>n,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=s.type()==="OS400"})(nt);const se=te,I=K,{promisify:Be}=_e,Po=Io,{isWindows:ko,isLinux:Mo,EMPTY_FN:Wo,EMPTY_STR:Go,KEY_LISTENERS:Ce,KEY_ERR:eu,KEY_RAW:Se,HANDLER_KEYS:jo,EV_CHANGE:rt,EV_ADD:it,EV_ADD_DIR:Uo,EV_ERROR:en,STR_DATA:Ko,STR_END:Vo,BRACE_START:zo,STAR:Yo}=nt,qo="watch",Xo=Be(se.open),tn=Be(se.stat),Qo=Be(se.lstat),Zo=Be(se.close),tu=Be(se.realpath),Jo={lstat:Qo,stat:tn},uu=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},$e=(t,e,u)=>{let s=t[e];s instanceof Set||(t[e]=s=new Set([s])),s.add(u)},ea=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},Te=(t,e,u)=>{const s=t[e];s instanceof Set?s.delete(u):s===u&&delete t[e]},un=t=>t instanceof Set?t.size===0:!t,Dt=new Map;function sn(t,e,u,s,n){const r=(i,D)=>{u(t),n(i,D,{watchedPath:t}),D&&t!==D&&ot(I.resolve(t,D),Ce,I.join(t,D))};try{return se.watch(t,e,r)}catch(i){s(i)}}const ot=(t,e,u,s,n)=>{const r=Dt.get(t);r&&uu(r[e],i=>{i(u,s,n)})},ta=(t,e,u,s)=>{const{listener:n,errHandler:r,rawEmitter:i}=s;let D=Dt.get(e),o;if(!u.persistent)return o=sn(t,u,n,r,i),o.close.bind(o);if(D)$e(D,Ce,n),$e(D,eu,r),$e(D,Se,i);else{if(o=sn(t,u,ot.bind(null,e,Ce),r,ot.bind(null,e,Se)),!o)return;o.on(en,async a=>{const c=ot.bind(null,e,eu);if(D.watcherUnusable=!0,ko&&a.code==="EPERM")try{const f=await Xo(t,"r");await Zo(f),c(a)}catch{}else c(a)}),D={listeners:n,errHandlers:r,rawEmitters:i,watcher:o},Dt.set(e,D)}return()=>{Te(D,Ce,n),Te(D,eu,r),Te(D,Se,i),un(D.listeners)&&(D.watcher.close(),Dt.delete(e),jo.forEach(ea(D)),D.watcher=void 0,Object.freeze(D))}},su=new Map,ua=(t,e,u,s)=>{const{listener:n,rawEmitter:r}=s;let i=su.get(e);const D=i&&i.options;return D&&(D.persistent<u.persistent||D.interval>u.interval)&&(i.listeners,i.rawEmitters,se.unwatchFile(e),i=void 0),i?($e(i,Ce,n),$e(i,Se,r)):(i={listeners:n,rawEmitters:r,options:u,watcher:se.watchFile(e,u,(o,a)=>{uu(i.rawEmitters,f=>{f(rt,e,{curr:o,prev:a})});const c=o.mtimeMs;(o.size!==a.size||c>a.mtimeMs||c===0)&&uu(i.listeners,f=>f(t,o))})},su.set(e,i)),()=>{Te(i,Ce,n),Te(i,Se,r),un(i.listeners)&&(su.delete(e),se.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};let sa=class{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const s=this.fsw.options,n=I.dirname(e),r=I.basename(e);this.fsw._getWatchedDir(n).add(r);const D=I.resolve(e),o={persistent:s.persistent};u||(u=Wo);let a;return s.usePolling?(o.interval=s.enableBinaryInterval&&Po(r)?s.binaryInterval:s.interval,a=ua(e,D,o,{listener:u,rawEmitter:this.fsw._emitRaw})):a=ta(e,D,o,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,s){if(this.fsw.closed)return;const n=I.dirname(e),r=I.basename(e),i=this.fsw._getWatchedDir(n);let D=u;if(i.has(r))return;const o=async(c,f)=>{if(this.fsw._throttle(qo,e,5)){if(!f||f.mtimeMs===0)try{const l=await tn(e);if(this.fsw.closed)return;const E=l.atimeMs,p=l.mtimeMs;(!E||E<=p||p!==D.mtimeMs)&&this.fsw._emit(rt,e,l),Mo&&D.ino!==l.ino?(this.fsw._closeFile(c),D=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,o))):D=l}catch{this.fsw._remove(n,r)}else if(i.has(r)){const l=f.atimeMs,E=f.mtimeMs;(!l||l<=E||E!==D.mtimeMs)&&this.fsw._emit(rt,e,f),D=f}}},a=this._watchWithNodeFs(e,o);if(!(s&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(it,e,0))return;this.fsw._emit(it,e,u)}return a}async _handleSymlink(e,u,s,n){if(this.fsw.closed)return;const r=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let D;try{D=await tu(s)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(n)?this.fsw._symlinkPaths.get(r)!==D&&(this.fsw._symlinkPaths.set(r,D),this.fsw._emit(rt,s,e.stats)):(i.add(n),this.fsw._symlinkPaths.set(r,D),this.fsw._emit(it,s,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(r))return!0;this.fsw._symlinkPaths.set(r,!0)}_handleRead(e,u,s,n,r,i,D){if(e=I.join(e,Go),!s.hasGlob&&(D=this.fsw._throttle("readdir",e,1e3),!D))return;const o=this.fsw._getWatchedDir(s.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>s.filterPath(f),directoryFilter:f=>s.filterDir(f),depth:0}).on(Ko,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let E=I.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,E,l))){if(this.fsw.closed){c=void 0;return}(l===n||!n&&!o.has(l))&&(this.fsw._incrReadyCount(),E=I.join(r,I.relative(r,E)),this._addToNodeFs(E,u,s,i+1))}}).on(en,this._boundHandleError);return new Promise(f=>c.once(Vo,()=>{if(this.fsw.closed){c=void 0;return}const l=D?D.clear():!1;f(),o.getChildren().filter(E=>E!==e&&!a.has(E)&&(!s.hasGlob||s.filterPath({fullPath:I.resolve(e,E)}))).forEach(E=>{this.fsw._remove(e,E)}),c=void 0,l&&this._handleRead(e,!1,s,n,r,i,D)}))}async _handleDir(e,u,s,n,r,i,D){const o=this.fsw._getWatchedDir(I.dirname(e)),a=o.has(I.basename(e));!(s&&this.fsw.options.ignoreInitial)&&!r&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(Uo,e,u),o.add(I.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||n<=l)&&!this.fsw._symlinkPaths.has(D)){if(!r&&(await this._handleRead(e,s,i,r,e,n,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(E,p)=>{p&&p.mtimeMs===0||this._handleRead(E,!1,i,r,e,n,c)})}return f}async _addToNodeFs(e,u,s,n,r){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const D=this.fsw._getWatchHelpers(e,n);!D.hasGlob&&s&&(D.hasGlob=s.hasGlob,D.globFilter=s.globFilter,D.filterPath=o=>s.filterPath(o),D.filterDir=o=>s.filterDir(o));try{const o=await Jo[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(Yo)&&!e.includes(zo);let c;if(o.isDirectory()){const f=I.resolve(e),l=a?await tu(e):e;if(this.fsw.closed||(c=await this._handleDir(D.watchPath,o,u,n,r,D,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(o.isSymbolicLink()){const f=a?await tu(e):e;if(this.fsw.closed)return;const l=I.dirname(D.watchPath);if(this.fsw._getWatchedDir(l).add(D.watchPath),this.fsw._emit(it,D.watchPath,o),c=await this._handleDir(l,o,u,n,e,D,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(I.resolve(e),f)}else c=this._handleFile(D.watchPath,o,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(o){if(this.fsw._handleError(o))return i(),e}}};var na=sa,nu={exports:{}};const ru=te,P=K,{promisify:iu}=_e;let Fe;try{Fe=dt.require("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(Fe){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(Fe=void 0)}}const{EV_ADD:Du,EV_CHANGE:ra,EV_ADD_DIR:nn,EV_UNLINK:at,EV_ERROR:ia,STR_DATA:Da,STR_END:oa,FSEVENT_CREATED:aa,FSEVENT_MODIFIED:la,FSEVENT_DELETED:ca,FSEVENT_MOVED:fa,FSEVENT_UNKNOWN:ha,FSEVENT_TYPE_FILE:da,FSEVENT_TYPE_DIRECTORY:xe,FSEVENT_TYPE_SYMLINK:rn,ROOT_GLOBSTAR:Dn,DIR_SUFFIX:Ea,DOT_SLASH:on,FUNCTION_TYPE:ou,EMPTY_FN:pa,IDENTITY_FN:Ca}=nt,Fa=t=>isNaN(t)?{}:{depth:t},au=iu(ru.stat),ga=iu(ru.lstat),an=iu(ru.realpath),ma={stat:au,lstat:ga},le=new Map,_a=10,Aa=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),ya=(t,e)=>({stop:Fe.watch(t,e)});function wa(t,e,u,s){let n=P.extname(e)?P.dirname(e):e;const r=P.dirname(n);let i=le.get(n);Ra(r)&&(n=r);const D=P.resolve(t),o=D!==e,a=(f,l,E)=>{o&&(f=f.replace(e,D)),(f===D||!f.indexOf(D+P.sep))&&u(f,l,E)};let c=!1;for(const f of le.keys())if(e.indexOf(P.resolve(f)+P.sep)===0){n=f,i=le.get(n),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:s,watcher:ya(n,(f,l)=>{if(!i.listeners.size)return;const E=Fe.getInfo(f,l);i.listeners.forEach(p=>{p(f,l,E)}),i.rawEmitter(E.event,f,E)})},le.set(n,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(le.delete(n),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const Ra=t=>{let e=0;for(const u of le.keys())if(u.indexOf(t)===0&&(e++,e>=_a))return!0;return!1},ba=()=>Fe&&le.size<128,lu=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=P.dirname(t))!==e;)u++;return u},ln=(t,e)=>t.type===xe&&e.isDirectory()||t.type===rn&&e.isSymbolicLink()||t.type===da&&e.isFile();let va=class{constructor(e){this.fsw=e}checkIgnored(e,u){const s=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return s.add(e),u&&u.isDirectory()&&s.add(e+Dn),!0;s.delete(e),s.delete(e+Dn)}addOrChange(e,u,s,n,r,i,D,o){const a=r.has(i)?ra:Du;this.handleEvent(a,e,u,s,n,r,i,D,o)}async checkExists(e,u,s,n,r,i,D,o){try{const a=await au(e);if(this.fsw.closed)return;ln(D,a)?this.addOrChange(e,u,s,n,r,i,D,o):this.handleEvent(at,e,u,s,n,r,i,D,o)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,s,n,r,i,D,o):this.handleEvent(at,e,u,s,n,r,i,D,o)}}handleEvent(e,u,s,n,r,i,D,o,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===at){const c=o.type===xe;(c||i.has(D))&&this.fsw._remove(r,D,c)}else{if(e===Du){if(o.type===xe&&this.fsw._getWatchedDir(u),o.type===rn&&a.followSymlinks){const f=a.depth===void 0?void 0:lu(s,n)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(r).add(D)}const c=o.type===xe?e+Ea:e;this.fsw._emit(c,u),c===nn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,s,n){if(this.fsw.closed||this.fsw._isIgnored(e))return;const r=this.fsw.options,D=wa(e,u,async(o,a,c)=>{if(this.fsw.closed||r.depth!==void 0&&lu(o,u)>r.depth)return;const f=s(P.join(e,P.relative(e,o)));if(n&&!n(f))return;const l=P.dirname(f),E=P.basename(f),p=this.fsw._getWatchedDir(c.type===xe?f:l);if(Aa.has(a)||c.event===ha)if(typeof r.ignored===ou){let F;try{F=await au(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;ln(c,F)?this.addOrChange(f,o,u,l,p,E,c,r):this.handleEvent(at,f,o,u,l,p,E,c,r)}else this.checkExists(f,o,u,l,p,E,c,r);else switch(c.event){case aa:case la:return this.addOrChange(f,o,u,l,p,E,c,r);case ca:case fa:return this.checkExists(f,o,u,l,p,E,c,r)}},this.fsw._emitRaw);return this.fsw._emitReady(),D}async _handleFsEventsSymlink(e,u,s,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const r=await an(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(r))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(r||e,i=>{let D=e;return r&&r!==on?D=i.replace(r,e):i!==on&&(D=P.join(e,i)),s(D)},!1,n)}catch(r){if(this.fsw._handleError(r))return this.fsw._emitReady()}}}emitAdd(e,u,s,n,r){const i=s(e),D=u.isDirectory(),o=this.fsw._getWatchedDir(P.dirname(i)),a=P.basename(i);D&&this.fsw._getWatchedDir(i),!o.has(a)&&(o.add(a),(!n.ignoreInitial||r===!0)&&this.fsw._emit(D?nn:Du,i,u))}initWatch(e,u,s,n){if(this.fsw.closed)return;const r=this._watchWithFsEvents(s.watchPath,P.resolve(e||s.watchPath),n,s.globFilter);this.fsw._addPathCloser(u,r)}async _addToFsEvents(e,u,s,n){if(this.fsw.closed)return;const r=this.fsw.options,i=typeof u===ou?u:Ca,D=this.fsw._getWatchHelpers(e);try{const o=await ma[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))throw null;if(o.isDirectory()){if(D.globFilter||this.emitAdd(i(e),o,i,r,s),n&&n>r.depth)return;this.fsw._readdirp(D.watchPath,{fileFilter:a=>D.filterPath(a),directoryFilter:a=>D.filterDir(a),...Fa(r.depth-(n||0))}).on(Da,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!D.filterPath(a))return;const c=P.join(D.watchPath,a.path),{fullPath:f}=a;if(D.followSymlinks&&a.stats.isSymbolicLink()){const l=r.depth===void 0?void 0:lu(c,P.resolve(D.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,r,s)}).on(ia,pa).on(oa,()=>{this.fsw._emitReady()})}else this.emitAdd(D.watchPath,o,i,r,s),this.fsw._emitReady()}catch(o){(!o||this.fsw._handleError(o))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(r.persistent&&s!==!0)if(typeof u===ou)this.initWatch(void 0,e,D,i);else{let o;try{o=await an(D.watchPath)}catch{}this.initWatch(o,e,D,i)}}};nu.exports=va,nu.exports.canUse=ba;var Ba=nu.exports;const{EventEmitter:Sa}=xn,cu=te,v=K,{promisify:cn}=_e,$a=wD,fu=$D.default,Ta=GD,hu=Ts,xa=To,Oa=bs,Na=na,fn=Ba,{EV_ALL:du,EV_READY:Ha,EV_ADD:lt,EV_CHANGE:Oe,EV_UNLINK:hn,EV_ADD_DIR:La,EV_UNLINK_DIR:Ia,EV_RAW:Pa,EV_ERROR:Eu,STR_CLOSE:ka,STR_END:Ma,BACK_SLASH_RE:Wa,DOUBLE_SLASH_RE:dn,SLASH_OR_BACK_SLASH_RE:Ga,DOT_RE:ja,REPLACER_RE:Ua,SLASH:pu,SLASH_SLASH:Ka,BRACE_START:Va,BANG:Cu,ONE_DOT:En,TWO_DOTS:za,GLOBSTAR:Ya,SLASH_GLOBSTAR:Fu,ANYMATCH_OPTS:gu,STRING_TYPE:mu,FUNCTION_TYPE:qa,EMPTY_STR:_u,EMPTY_FN:Xa,isWindows:Qa,isMacos:Za,isIBMi:Ja}=nt,el=cn(cu.stat),tl=cn(cu.readdir),Au=(t=[])=>Array.isArray(t)?t:[t],pn=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?pn(u,e):e.push(u)}),e),Cn=t=>{const e=pn(Au(t));if(!e.every(u=>typeof u===mu))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(gn)},Fn=t=>{let e=t.replace(Wa,pu),u=!1;for(e.startsWith(Ka)&&(u=!0);e.match(dn);)e=e.replace(dn,pu);return u&&(e=pu+e),e},gn=t=>Fn(v.normalize(Fn(t))),mn=(t=_u)=>e=>typeof e!==mu?e:gn(v.isAbsolute(e)?e:v.join(t,e)),ul=(t,e)=>v.isAbsolute(t)?t:t.startsWith(Cu)?Cu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class sl{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;u&&e!==En&&e!==za&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const s=this.path;try{await tl(s)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(s),v.basename(s))}}has(e){const{items:u}=this;if(u)return u.has(e)}getChildren(){const{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const nl="stat",rl="lstat";class il{constructor(e,u,s,n){this.fsw=n,this.path=e=e.replace(Ua,_u),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===_u&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&s?void 0:!1,this.globFilter=this.hasGlob?fu(e,void 0,gu):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(r=>{r.length>1&&r.pop()}),this.followSymlinks=s,this.statMethod=s?nl:rl}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const s=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===qa?this.globFilter(s):!0)&&this.fsw._isntIgnored(s,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Va)?xa.expand(e):[e]).forEach(n=>{u.push(v.relative(this.watchPath,n).split(Ga))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let s=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((r,i)=>(r===Ya&&(s=!0),s||!u[0][i]||fu(r,u[0][i],gu))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class Dl extends Sa{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),fn.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=Za),Ja&&(u.usePolling=!0);const n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){const o=n.toLowerCase();o==="false"||o==="0"?u.usePolling=!1:o==="true"||o==="1"?u.usePolling=!0:u.usePolling=!!o}const r=process.env.CHOKIDAR_INTERVAL;r&&(u.interval=Number.parseInt(r,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=Au(u.ignored));let D=0;this._emitReady=()=>{D++,D>=this._readyCount&&(this._emitReady=Xa,this._readyEmitted=!0,process.nextTick(()=>this.emit(Ha)))},this._emitRaw=(...o)=>this.emit(Pa,...o),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new fn(this):this._nodeFsHandler=new Na(this),Object.freeze(u)}add(e,u,s){const{cwd:n,disableGlobbing:r}=this.options;this.closed=!1;let i=Cn(e);return n&&(i=i.map(D=>{const o=ul(D,n);return r||!hu(D)?o:Oa(o)})),i=i.filter(D=>D.startsWith(Cu)?(this._ignoredPaths.add(D.slice(1)),!1):(this._ignoredPaths.delete(D),this._ignoredPaths.delete(D+Fu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(D=>this._fsEventsHandler._addToFsEvents(D))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async D=>{const o=await this._nodeFsHandler._addToNodeFs(D,!s,0,0,u);return o&&this._emitReady(),o})).then(D=>{this.closed||D.filter(o=>o).forEach(o=>{this.add(v.dirname(o),v.basename(u||o))})})),this}unwatch(e){if(this.closed)return this;const u=Cn(e),{cwd:s}=this.options;return u.forEach(n=>{!v.isAbsolute(n)&&!this._closers.has(n)&&(s&&(n=v.join(s,n)),n=v.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+Fu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(s=>{const n=s();n instanceof Promise&&e.push(n)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,s)=>{const n=this.options.cwd?v.relative(this.options.cwd,s):s;e[n||En]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==Eu&&this.emit(du,...u)}async _emit(e,u,s,n,r){if(this.closed)return;const i=this.options;Qa&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const D=[e,u];r!==void 0?D.push(s,n,r):n!==void 0?D.push(s,n):s!==void 0&&D.push(s);const o=i.awaitWriteFinish;let a;if(o&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===hn)return this._pendingUnlinks.set(u,D),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(du,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===lt&&this._pendingUnlinks.has(u)&&(e=D[0]=Oe,this._pendingUnlinks.delete(u))}if(o&&(e===lt||e===Oe)&&this._readyEmitted){const c=(f,l)=>{f?(e=D[0]=Eu,D[1]=f,this.emitWithAll(e,D)):l&&(D.length>2?D[2]=l:D.push(l),this.emitWithAll(e,D))};return this._awaitWriteFinish(u,o.stabilityThreshold,e,c),this}if(e===Oe&&!this._throttle(Oe,u,50))return this;if(i.alwaysStat&&s===void 0&&(e===lt||e===La||e===Oe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await el(c)}catch{}if(!f||this.closed)return;D.push(f)}return this.emitWithAll(e,D),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(Eu,e),e||this.closed}_throttle(e,u,s){this._throttled.has(e)||this._throttled.set(e,new Map);const n=this._throttled.get(e),r=n.get(u);if(r)return r.count++,!1;let i;const D=()=>{const a=n.get(u),c=a?a.count:0;return n.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(D,s);const o={timeoutObject:i,clear:D,count:0};return n.set(u,o),o}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,s,n){let r,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const D=new Date,o=a=>{cu.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&n(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const E=this._pendingWrites.get(e);l-E.lastChange>=u?(this._pendingWrites.delete(e),n(void 0,f)):r=setTimeout(o,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:D,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(r),s)}),r=setTimeout(o,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&ja.test(e))return!0;if(!this._userIgnored){const{cwd:s}=this.options,n=this.options.ignored,r=n&&n.map(mn(s)),i=Au(r).filter(o=>typeof o===mu&&!hu(o)).map(o=>o+Fu),D=this._getGlobIgnored().map(mn(s)).concat(r,i);this._userIgnored=fu(D,void 0,gu)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const s=u||this.options.disableGlobbing||!hu(e)?e:Ta(e),n=this.options.followSymlinks;return new il(e,s,n,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new sl(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const s=(e&&Number.parseInt(e.mode,10))&511;return!!(4&Number.parseInt(s.toString(8)[0],10))}_remove(e,u,s){const n=v.join(e,u),r=v.resolve(n);if(s=s!=null?s:this._watched.has(n)||this._watched.has(r),!this._throttle("remove",n,100))return;!s&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(n).getChildren().forEach(l=>this._remove(n,l));const o=this._getWatchedDir(e),a=o.has(u);o.remove(u),this._symlinkPaths.has(r)&&this._symlinkPaths.delete(r);let c=n;if(this.options.cwd&&(c=v.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===lt)return;this._watched.delete(n),this._watched.delete(r);const f=s?Ia:hn;a&&!this._isIgnored(n)&&this._emit(f,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);u&&(u.forEach(s=>s()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let s=this._closers.get(e);s||(s=[],this._closers.set(e,s)),s.push(u)}_readdirp(e,u){if(this.closed)return;const s={type:du,alwaysStat:!0,lstat:!0,...u};let n=$a(e,s);return this._streams.add(n),n.once(ka,()=>{n=void 0}),n.once(Ma,()=>{n&&(this._streams.delete(n),n=void 0)}),n}}const ol=(t,e)=>{const u=new Dl(e);return u.add(t),u};var al=ol;let ce=!0;const ge=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Ne=0;if(ge.process&&ge.process.env&&ge.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,NO_COLOR:u,TERM:s,COLORTERM:n}=ge.process.env;e||u||t==="0"?ce=!1:t==="1"||t==="2"||t==="3"?ce=!0:s==="dumb"?ce=!1:"CI"in ge.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in ge.process.env)?ce=!0:ce=process.stdout.isTTY,ce&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?Ne=3:s&&(s.endsWith("-256color")||s.endsWith("256"))?Ne=2:Ne=1)}let _n={enabled:ce,supportLevel:Ne};function He(t,e,u=1){const s=`\x1B[${t}m`,n=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return i=>_n.enabled&&_n.supportLevel>=u?s+(""+i).replace(r,s)+n:""+i}const Le=He(33,39),ll=He(90,39),cl=He(92,39),fl=He(95,39),hl=He(96,39),ct=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}},An=(t,e=process.argv.slice(2))=>(Ru(t,e,{ignore:ct()}),e),dl=t=>{let e=Buffer.alloc(0);return u=>{for(e=Buffer.concat([e,u]);e.length>4;){const s=e.readInt32BE(0);if(e.length>=4+s){const n=e.slice(4,4+s);t(n),e=e.slice(4+s)}else break}}},yn=async()=>{const t=Nn.createServer(u=>{u.on("data",dl(s=>{const n=JSON.parse(s.toString());t.emit("data",n)}))}),e=Ln.getPipePath(process.pid);return await te.promises.mkdir(Hn.tmpdir,{recursive:!0}),await new Promise((u,s)=>{t.listen(e,u),t.on("error",s)}),t.unref(),process.on("exit",()=>{if(t.close(),process.platform!=="win32")try{te.rmSync(e)}catch{}}),t},El=()=>new Date().toLocaleTimeString(),Ie=(...t)=>console.log(ll(El()),hl("[tsx]"),...t),pl="\x1Bc",Cl=(t,e)=>{let u;return function(){u&&clearTimeout(u),u=setTimeout(()=>Reflect.apply(t,this,arguments),e)}},wn={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},Fl=ei({name:"watch",parameters:["<script path>"],flags:wn,help:{description:"Run the script and watch for changes"},ignoreArgv:ct(!1)},async t=>{const e=An(wn,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let s,n=!1;(await yn()).on("data",l=>{if(l&&typeof l=="object"&&"type"in l&&l.type==="dependency"&&"path"in l&&typeof l.path=="string"){const E=l.path.startsWith("file:")?yu.fileURLToPath(l.path):l.path;K.isAbsolute(E)&&f.add(E)}});const i=()=>{if(!n)return Ds(e,u)};let D=!1;const o=async(l,E="SIGTERM",p=5e3)=>{let F=!1;const A=new Promise(B=>{l.on("exit",N=>{F=!0,D=!1,B(N)})});return D=!0,l.kill(E),setTimeout(()=>{F||(Ie(Le(`Process didn't exit in ${Math.floor(p/1e3)}s. Force killing...`)),l.kill("SIGKILL"))},p),await A},a=Cl(async(l,E)=>{const p=l?`${l?fl(l):""}${E?` in ${cl(`./${E}`)}`:""}`:"";if(D){Ie(p,Le("Process hasn't exited. Killing process...")),s.kill("SIGKILL");return}s&&(s.exitCode===null?(Ie(p,Le("Restarting...")),await o(s)):Ie(p,Le("Rerunning...")),u.clearScreen&&process.stdout.write(pl)),s=i()},100);a();const c=l=>{n=!0,(s==null?void 0:s.exitCode)===null?(D&&Ie(Le("Previous process hasn't exited yet. Force killing...")),o(s,D?"SIGKILL":l).then(E=>{process.exit(E!=null?E:0)},()=>{})):process.exit(me.constants.signals[l])};process.on("SIGINT",c),process.on("SIGTERM",c);const f=al(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",a);process.stdin.on("data",()=>a("Return key"))}),gl=(t,e)=>{let u;e.on("data",r=>{r&&r.type==="signal"&&u&&u(r.signal)});const s=()=>{const r=new Promise(i=>{setTimeout(()=>i(void 0),30),u=i});return r.then(()=>{u=void 0},()=>{}),r},n=async r=>{await s()!==r&&(t.kill(r),await s()!==r&&(t.on("exit",()=>{const o=me.constants.signals[r];process.exit(128+o)}),t.kill("SIGKILL")))};process.on("SIGINT",n),process.on("SIGTERM",n)},Rn={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};Ku({name:"tsx",parameters:["[script path]"],commands:[Fl],flags:{...Rn,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:ct()},async t=>{t.flags.version?process.stdout.write(`tsx v${$n.version}
+`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const ho=qt,{MAX_LENGTH:Xs,CHAR_BACKSLASH:Jt,CHAR_BACKTICK:Eo,CHAR_COMMA:po,CHAR_DOT:Co,CHAR_LEFT_PARENTHESES:Fo,CHAR_RIGHT_PARENTHESES:go,CHAR_LEFT_CURLY_BRACE:mo,CHAR_RIGHT_CURLY_BRACE:_o,CHAR_LEFT_SQUARE_BRACKET:Qs,CHAR_RIGHT_SQUARE_BRACKET:Zs,CHAR_DOUBLE_QUOTE:Ao,CHAR_SINGLE_QUOTE:yo,CHAR_NO_BREAK_SPACE:wo,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ro}=fo,bo=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},s=typeof u.maxLength=="number"?Math.min(Xs,u.maxLength):Xs;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let n={type:"root",input:t,nodes:[]},r=[n],i=n,D=n,o=0,a=t.length,c=0,f=0,l;const E=()=>t[c++],p=F=>{if(F.type==="text"&&D.type==="dot"&&(D.type="text"),D&&D.type==="text"&&F.type==="text"){D.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=D,D=F,F};for(p({type:"bos"});c<a;)if(i=r[r.length-1],l=E(),!(l===Ro||l===wo)){if(l===Jt){p({type:"text",value:(e.keepEscaping?l:"")+E()});continue}if(l===Zs){p({type:"text",value:"\\"+l});continue}if(l===Qs){o++;let F;for(;c<a&&(F=E());){if(l+=F,F===Qs){o++;continue}if(F===Jt){l+=E();continue}if(F===Zs&&(o--,o===0))break}p({type:"text",value:l});continue}if(l===Fo){i=p({type:"paren",nodes:[]}),r.push(i),p({type:"text",value:l});continue}if(l===go){if(i.type!=="paren"){p({type:"text",value:l});continue}i=r.pop(),p({type:"text",value:l}),i=r[r.length-1];continue}if(l===Ao||l===yo||l===Eo){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=E());){if(A===Jt){l+=A+E();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}p({type:"text",value:l});continue}if(l===mo){f++;let A={type:"brace",open:!0,close:!1,dollar:D.value&&D.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=p(A),r.push(i),p({type:"open",value:l});continue}if(l===_o){if(i.type!=="brace"){p({type:"text",value:l});continue}let F="close";i=r.pop(),i.close=!0,p({type:F,value:l}),f--,i=r[r.length-1];continue}if(l===po&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:ho(i)}]}p({type:"comma",value:l}),i.commas++;continue}if(l===Co&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){p({type:"text",value:l});continue}if(D.type==="dot"){if(i.range=[],D.value+=l,D.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,D.type="text";continue}i.ranges++,i.args=[];continue}if(D.type==="range"){F.pop();let A=F[F.length-1];A.value+=D.value+l,D=A,i.ranges--;continue}p({type:"dot",value:l});continue}p({type:"text",value:l})}do if(i=r.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=r[r.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(r.length>0);return p({type:"eos"}),n};var vo=bo;const Js=qt,Bo=oo,So=co,$o=vo,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let s of t){let n=Y.create(s,e);Array.isArray(n)?u.push(...n):u.push(n)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>$o(t,e),Y.stringify=(t,e={})=>Js(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),Bo(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=So(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var To=Y,xo=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"],Oo=xo;const No=K,Ho=Oo,Lo=new Set(Ho);var Io=t=>Lo.has(No.extname(t).slice(1).toLowerCase()),nt={};(function(t){const{sep:e}=K,{platform:u}=process,s=me;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=n=>n,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=s.type()==="OS400"})(nt);const se=te,I=K,{promisify:Be}=_e,Po=Io,{isWindows:ko,isLinux:Mo,EMPTY_FN:Wo,EMPTY_STR:Go,KEY_LISTENERS:Ce,KEY_ERR:eu,KEY_RAW:Se,HANDLER_KEYS:jo,EV_CHANGE:rt,EV_ADD:it,EV_ADD_DIR:Uo,EV_ERROR:en,STR_DATA:Ko,STR_END:Vo,BRACE_START:zo,STAR:Yo}=nt,qo="watch",Xo=Be(se.open),tn=Be(se.stat),Qo=Be(se.lstat),Zo=Be(se.close),tu=Be(se.realpath),Jo={lstat:Qo,stat:tn},uu=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},$e=(t,e,u)=>{let s=t[e];s instanceof Set||(t[e]=s=new Set([s])),s.add(u)},ea=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},Te=(t,e,u)=>{const s=t[e];s instanceof Set?s.delete(u):s===u&&delete t[e]},un=t=>t instanceof Set?t.size===0:!t,Dt=new Map;function sn(t,e,u,s,n){const r=(i,D)=>{u(t),n(i,D,{watchedPath:t}),D&&t!==D&&ot(I.resolve(t,D),Ce,I.join(t,D))};try{return se.watch(t,e,r)}catch(i){s(i)}}const ot=(t,e,u,s,n)=>{const r=Dt.get(t);r&&uu(r[e],i=>{i(u,s,n)})},ta=(t,e,u,s)=>{const{listener:n,errHandler:r,rawEmitter:i}=s;let D=Dt.get(e),o;if(!u.persistent)return o=sn(t,u,n,r,i),o.close.bind(o);if(D)$e(D,Ce,n),$e(D,eu,r),$e(D,Se,i);else{if(o=sn(t,u,ot.bind(null,e,Ce),r,ot.bind(null,e,Se)),!o)return;o.on(en,async a=>{const c=ot.bind(null,e,eu);if(D.watcherUnusable=!0,ko&&a.code==="EPERM")try{const f=await Xo(t,"r");await Zo(f),c(a)}catch{}else c(a)}),D={listeners:n,errHandlers:r,rawEmitters:i,watcher:o},Dt.set(e,D)}return()=>{Te(D,Ce,n),Te(D,eu,r),Te(D,Se,i),un(D.listeners)&&(D.watcher.close(),Dt.delete(e),jo.forEach(ea(D)),D.watcher=void 0,Object.freeze(D))}},su=new Map,ua=(t,e,u,s)=>{const{listener:n,rawEmitter:r}=s;let i=su.get(e);const D=i&&i.options;return D&&(D.persistent<u.persistent||D.interval>u.interval)&&(i.listeners,i.rawEmitters,se.unwatchFile(e),i=void 0),i?($e(i,Ce,n),$e(i,Se,r)):(i={listeners:n,rawEmitters:r,options:u,watcher:se.watchFile(e,u,(o,a)=>{uu(i.rawEmitters,f=>{f(rt,e,{curr:o,prev:a})});const c=o.mtimeMs;(o.size!==a.size||c>a.mtimeMs||c===0)&&uu(i.listeners,f=>f(t,o))})},su.set(e,i)),()=>{Te(i,Ce,n),Te(i,Se,r),un(i.listeners)&&(su.delete(e),se.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};let sa=class{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const s=this.fsw.options,n=I.dirname(e),r=I.basename(e);this.fsw._getWatchedDir(n).add(r);const D=I.resolve(e),o={persistent:s.persistent};u||(u=Wo);let a;return s.usePolling?(o.interval=s.enableBinaryInterval&&Po(r)?s.binaryInterval:s.interval,a=ua(e,D,o,{listener:u,rawEmitter:this.fsw._emitRaw})):a=ta(e,D,o,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,s){if(this.fsw.closed)return;const n=I.dirname(e),r=I.basename(e),i=this.fsw._getWatchedDir(n);let D=u;if(i.has(r))return;const o=async(c,f)=>{if(this.fsw._throttle(qo,e,5)){if(!f||f.mtimeMs===0)try{const l=await tn(e);if(this.fsw.closed)return;const E=l.atimeMs,p=l.mtimeMs;(!E||E<=p||p!==D.mtimeMs)&&this.fsw._emit(rt,e,l),Mo&&D.ino!==l.ino?(this.fsw._closeFile(c),D=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,o))):D=l}catch{this.fsw._remove(n,r)}else if(i.has(r)){const l=f.atimeMs,E=f.mtimeMs;(!l||l<=E||E!==D.mtimeMs)&&this.fsw._emit(rt,e,f),D=f}}},a=this._watchWithNodeFs(e,o);if(!(s&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(it,e,0))return;this.fsw._emit(it,e,u)}return a}async _handleSymlink(e,u,s,n){if(this.fsw.closed)return;const r=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let D;try{D=await tu(s)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(n)?this.fsw._symlinkPaths.get(r)!==D&&(this.fsw._symlinkPaths.set(r,D),this.fsw._emit(rt,s,e.stats)):(i.add(n),this.fsw._symlinkPaths.set(r,D),this.fsw._emit(it,s,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(r))return!0;this.fsw._symlinkPaths.set(r,!0)}_handleRead(e,u,s,n,r,i,D){if(e=I.join(e,Go),!s.hasGlob&&(D=this.fsw._throttle("readdir",e,1e3),!D))return;const o=this.fsw._getWatchedDir(s.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>s.filterPath(f),directoryFilter:f=>s.filterDir(f),depth:0}).on(Ko,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let E=I.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,E,l))){if(this.fsw.closed){c=void 0;return}(l===n||!n&&!o.has(l))&&(this.fsw._incrReadyCount(),E=I.join(r,I.relative(r,E)),this._addToNodeFs(E,u,s,i+1))}}).on(en,this._boundHandleError);return new Promise(f=>c.once(Vo,()=>{if(this.fsw.closed){c=void 0;return}const l=D?D.clear():!1;f(),o.getChildren().filter(E=>E!==e&&!a.has(E)&&(!s.hasGlob||s.filterPath({fullPath:I.resolve(e,E)}))).forEach(E=>{this.fsw._remove(e,E)}),c=void 0,l&&this._handleRead(e,!1,s,n,r,i,D)}))}async _handleDir(e,u,s,n,r,i,D){const o=this.fsw._getWatchedDir(I.dirname(e)),a=o.has(I.basename(e));!(s&&this.fsw.options.ignoreInitial)&&!r&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(Uo,e,u),o.add(I.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||n<=l)&&!this.fsw._symlinkPaths.has(D)){if(!r&&(await this._handleRead(e,s,i,r,e,n,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(E,p)=>{p&&p.mtimeMs===0||this._handleRead(E,!1,i,r,e,n,c)})}return f}async _addToNodeFs(e,u,s,n,r){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const D=this.fsw._getWatchHelpers(e,n);!D.hasGlob&&s&&(D.hasGlob=s.hasGlob,D.globFilter=s.globFilter,D.filterPath=o=>s.filterPath(o),D.filterDir=o=>s.filterDir(o));try{const o=await Jo[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(Yo)&&!e.includes(zo);let c;if(o.isDirectory()){const f=I.resolve(e),l=a?await tu(e):e;if(this.fsw.closed||(c=await this._handleDir(D.watchPath,o,u,n,r,D,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(o.isSymbolicLink()){const f=a?await tu(e):e;if(this.fsw.closed)return;const l=I.dirname(D.watchPath);if(this.fsw._getWatchedDir(l).add(D.watchPath),this.fsw._emit(it,D.watchPath,o),c=await this._handleDir(l,o,u,n,e,D,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(I.resolve(e),f)}else c=this._handleFile(D.watchPath,o,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(o){if(this.fsw._handleError(o))return i(),e}}};var na=sa,nu={exports:{}};const ru=te,P=K,{promisify:iu}=_e;let Fe;try{Fe=dt.require("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(Fe){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(Fe=void 0)}}const{EV_ADD:Du,EV_CHANGE:ra,EV_ADD_DIR:nn,EV_UNLINK:at,EV_ERROR:ia,STR_DATA:Da,STR_END:oa,FSEVENT_CREATED:aa,FSEVENT_MODIFIED:la,FSEVENT_DELETED:ca,FSEVENT_MOVED:fa,FSEVENT_UNKNOWN:ha,FSEVENT_TYPE_FILE:da,FSEVENT_TYPE_DIRECTORY:xe,FSEVENT_TYPE_SYMLINK:rn,ROOT_GLOBSTAR:Dn,DIR_SUFFIX:Ea,DOT_SLASH:on,FUNCTION_TYPE:ou,EMPTY_FN:pa,IDENTITY_FN:Ca}=nt,Fa=t=>isNaN(t)?{}:{depth:t},au=iu(ru.stat),ga=iu(ru.lstat),an=iu(ru.realpath),ma={stat:au,lstat:ga},le=new Map,_a=10,Aa=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),ya=(t,e)=>({stop:Fe.watch(t,e)});function wa(t,e,u,s){let n=P.extname(e)?P.dirname(e):e;const r=P.dirname(n);let i=le.get(n);Ra(r)&&(n=r);const D=P.resolve(t),o=D!==e,a=(f,l,E)=>{o&&(f=f.replace(e,D)),(f===D||!f.indexOf(D+P.sep))&&u(f,l,E)};let c=!1;for(const f of le.keys())if(e.indexOf(P.resolve(f)+P.sep)===0){n=f,i=le.get(n),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:s,watcher:ya(n,(f,l)=>{if(!i.listeners.size)return;const E=Fe.getInfo(f,l);i.listeners.forEach(p=>{p(f,l,E)}),i.rawEmitter(E.event,f,E)})},le.set(n,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(le.delete(n),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const Ra=t=>{let e=0;for(const u of le.keys())if(u.indexOf(t)===0&&(e++,e>=_a))return!0;return!1},ba=()=>Fe&&le.size<128,lu=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=P.dirname(t))!==e;)u++;return u},ln=(t,e)=>t.type===xe&&e.isDirectory()||t.type===rn&&e.isSymbolicLink()||t.type===da&&e.isFile();let va=class{constructor(e){this.fsw=e}checkIgnored(e,u){const s=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return s.add(e),u&&u.isDirectory()&&s.add(e+Dn),!0;s.delete(e),s.delete(e+Dn)}addOrChange(e,u,s,n,r,i,D,o){const a=r.has(i)?ra:Du;this.handleEvent(a,e,u,s,n,r,i,D,o)}async checkExists(e,u,s,n,r,i,D,o){try{const a=await au(e);if(this.fsw.closed)return;ln(D,a)?this.addOrChange(e,u,s,n,r,i,D,o):this.handleEvent(at,e,u,s,n,r,i,D,o)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,s,n,r,i,D,o):this.handleEvent(at,e,u,s,n,r,i,D,o)}}handleEvent(e,u,s,n,r,i,D,o,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===at){const c=o.type===xe;(c||i.has(D))&&this.fsw._remove(r,D,c)}else{if(e===Du){if(o.type===xe&&this.fsw._getWatchedDir(u),o.type===rn&&a.followSymlinks){const f=a.depth===void 0?void 0:lu(s,n)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(r).add(D)}const c=o.type===xe?e+Ea:e;this.fsw._emit(c,u),c===nn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,s,n){if(this.fsw.closed||this.fsw._isIgnored(e))return;const r=this.fsw.options,D=wa(e,u,async(o,a,c)=>{if(this.fsw.closed||r.depth!==void 0&&lu(o,u)>r.depth)return;const f=s(P.join(e,P.relative(e,o)));if(n&&!n(f))return;const l=P.dirname(f),E=P.basename(f),p=this.fsw._getWatchedDir(c.type===xe?f:l);if(Aa.has(a)||c.event===ha)if(typeof r.ignored===ou){let F;try{F=await au(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;ln(c,F)?this.addOrChange(f,o,u,l,p,E,c,r):this.handleEvent(at,f,o,u,l,p,E,c,r)}else this.checkExists(f,o,u,l,p,E,c,r);else switch(c.event){case aa:case la:return this.addOrChange(f,o,u,l,p,E,c,r);case ca:case fa:return this.checkExists(f,o,u,l,p,E,c,r)}},this.fsw._emitRaw);return this.fsw._emitReady(),D}async _handleFsEventsSymlink(e,u,s,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const r=await an(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(r))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(r||e,i=>{let D=e;return r&&r!==on?D=i.replace(r,e):i!==on&&(D=P.join(e,i)),s(D)},!1,n)}catch(r){if(this.fsw._handleError(r))return this.fsw._emitReady()}}}emitAdd(e,u,s,n,r){const i=s(e),D=u.isDirectory(),o=this.fsw._getWatchedDir(P.dirname(i)),a=P.basename(i);D&&this.fsw._getWatchedDir(i),!o.has(a)&&(o.add(a),(!n.ignoreInitial||r===!0)&&this.fsw._emit(D?nn:Du,i,u))}initWatch(e,u,s,n){if(this.fsw.closed)return;const r=this._watchWithFsEvents(s.watchPath,P.resolve(e||s.watchPath),n,s.globFilter);this.fsw._addPathCloser(u,r)}async _addToFsEvents(e,u,s,n){if(this.fsw.closed)return;const r=this.fsw.options,i=typeof u===ou?u:Ca,D=this.fsw._getWatchHelpers(e);try{const o=await ma[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))throw null;if(o.isDirectory()){if(D.globFilter||this.emitAdd(i(e),o,i,r,s),n&&n>r.depth)return;this.fsw._readdirp(D.watchPath,{fileFilter:a=>D.filterPath(a),directoryFilter:a=>D.filterDir(a),...Fa(r.depth-(n||0))}).on(Da,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!D.filterPath(a))return;const c=P.join(D.watchPath,a.path),{fullPath:f}=a;if(D.followSymlinks&&a.stats.isSymbolicLink()){const l=r.depth===void 0?void 0:lu(c,P.resolve(D.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,r,s)}).on(ia,pa).on(oa,()=>{this.fsw._emitReady()})}else this.emitAdd(D.watchPath,o,i,r,s),this.fsw._emitReady()}catch(o){(!o||this.fsw._handleError(o))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(r.persistent&&s!==!0)if(typeof u===ou)this.initWatch(void 0,e,D,i);else{let o;try{o=await an(D.watchPath)}catch{}this.initWatch(o,e,D,i)}}};nu.exports=va,nu.exports.canUse=ba;var Ba=nu.exports;const{EventEmitter:Sa}=xn,cu=te,v=K,{promisify:cn}=_e,$a=wD,fu=$D.default,Ta=GD,hu=Ts,xa=To,Oa=bs,Na=na,fn=Ba,{EV_ALL:du,EV_READY:Ha,EV_ADD:lt,EV_CHANGE:Oe,EV_UNLINK:hn,EV_ADD_DIR:La,EV_UNLINK_DIR:Ia,EV_RAW:Pa,EV_ERROR:Eu,STR_CLOSE:ka,STR_END:Ma,BACK_SLASH_RE:Wa,DOUBLE_SLASH_RE:dn,SLASH_OR_BACK_SLASH_RE:Ga,DOT_RE:ja,REPLACER_RE:Ua,SLASH:pu,SLASH_SLASH:Ka,BRACE_START:Va,BANG:Cu,ONE_DOT:En,TWO_DOTS:za,GLOBSTAR:Ya,SLASH_GLOBSTAR:Fu,ANYMATCH_OPTS:gu,STRING_TYPE:mu,FUNCTION_TYPE:qa,EMPTY_STR:_u,EMPTY_FN:Xa,isWindows:Qa,isMacos:Za,isIBMi:Ja}=nt,el=cn(cu.stat),tl=cn(cu.readdir),Au=(t=[])=>Array.isArray(t)?t:[t],pn=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?pn(u,e):e.push(u)}),e),Cn=t=>{const e=pn(Au(t));if(!e.every(u=>typeof u===mu))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(gn)},Fn=t=>{let e=t.replace(Wa,pu),u=!1;for(e.startsWith(Ka)&&(u=!0);e.match(dn);)e=e.replace(dn,pu);return u&&(e=pu+e),e},gn=t=>Fn(v.normalize(Fn(t))),mn=(t=_u)=>e=>typeof e!==mu?e:gn(v.isAbsolute(e)?e:v.join(t,e)),ul=(t,e)=>v.isAbsolute(t)?t:t.startsWith(Cu)?Cu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class sl{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;u&&e!==En&&e!==za&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const s=this.path;try{await tl(s)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(s),v.basename(s))}}has(e){const{items:u}=this;if(u)return u.has(e)}getChildren(){const{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const nl="stat",rl="lstat";class il{constructor(e,u,s,n){this.fsw=n,this.path=e=e.replace(Ua,_u),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===_u&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&s?void 0:!1,this.globFilter=this.hasGlob?fu(e,void 0,gu):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(r=>{r.length>1&&r.pop()}),this.followSymlinks=s,this.statMethod=s?nl:rl}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const s=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===qa?this.globFilter(s):!0)&&this.fsw._isntIgnored(s,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Va)?xa.expand(e):[e]).forEach(n=>{u.push(v.relative(this.watchPath,n).split(Ga))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let s=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((r,i)=>(r===Ya&&(s=!0),s||!u[0][i]||fu(r,u[0][i],gu))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class Dl extends Sa{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),fn.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=Za),Ja&&(u.usePolling=!0);const n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){const o=n.toLowerCase();o==="false"||o==="0"?u.usePolling=!1:o==="true"||o==="1"?u.usePolling=!0:u.usePolling=!!o}const r=process.env.CHOKIDAR_INTERVAL;r&&(u.interval=Number.parseInt(r,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=Au(u.ignored));let D=0;this._emitReady=()=>{D++,D>=this._readyCount&&(this._emitReady=Xa,this._readyEmitted=!0,process.nextTick(()=>this.emit(Ha)))},this._emitRaw=(...o)=>this.emit(Pa,...o),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new fn(this):this._nodeFsHandler=new Na(this),Object.freeze(u)}add(e,u,s){const{cwd:n,disableGlobbing:r}=this.options;this.closed=!1;let i=Cn(e);return n&&(i=i.map(D=>{const o=ul(D,n);return r||!hu(D)?o:Oa(o)})),i=i.filter(D=>D.startsWith(Cu)?(this._ignoredPaths.add(D.slice(1)),!1):(this._ignoredPaths.delete(D),this._ignoredPaths.delete(D+Fu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(D=>this._fsEventsHandler._addToFsEvents(D))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async D=>{const o=await this._nodeFsHandler._addToNodeFs(D,!s,0,0,u);return o&&this._emitReady(),o})).then(D=>{this.closed||D.filter(o=>o).forEach(o=>{this.add(v.dirname(o),v.basename(u||o))})})),this}unwatch(e){if(this.closed)return this;const u=Cn(e),{cwd:s}=this.options;return u.forEach(n=>{!v.isAbsolute(n)&&!this._closers.has(n)&&(s&&(n=v.join(s,n)),n=v.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+Fu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(s=>{const n=s();n instanceof Promise&&e.push(n)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,s)=>{const n=this.options.cwd?v.relative(this.options.cwd,s):s;e[n||En]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==Eu&&this.emit(du,...u)}async _emit(e,u,s,n,r){if(this.closed)return;const i=this.options;Qa&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const D=[e,u];r!==void 0?D.push(s,n,r):n!==void 0?D.push(s,n):s!==void 0&&D.push(s);const o=i.awaitWriteFinish;let a;if(o&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===hn)return this._pendingUnlinks.set(u,D),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(du,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===lt&&this._pendingUnlinks.has(u)&&(e=D[0]=Oe,this._pendingUnlinks.delete(u))}if(o&&(e===lt||e===Oe)&&this._readyEmitted){const c=(f,l)=>{f?(e=D[0]=Eu,D[1]=f,this.emitWithAll(e,D)):l&&(D.length>2?D[2]=l:D.push(l),this.emitWithAll(e,D))};return this._awaitWriteFinish(u,o.stabilityThreshold,e,c),this}if(e===Oe&&!this._throttle(Oe,u,50))return this;if(i.alwaysStat&&s===void 0&&(e===lt||e===La||e===Oe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await el(c)}catch{}if(!f||this.closed)return;D.push(f)}return this.emitWithAll(e,D),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(Eu,e),e||this.closed}_throttle(e,u,s){this._throttled.has(e)||this._throttled.set(e,new Map);const n=this._throttled.get(e),r=n.get(u);if(r)return r.count++,!1;let i;const D=()=>{const a=n.get(u),c=a?a.count:0;return n.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(D,s);const o={timeoutObject:i,clear:D,count:0};return n.set(u,o),o}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,s,n){let r,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const D=new Date,o=a=>{cu.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&n(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const E=this._pendingWrites.get(e);l-E.lastChange>=u?(this._pendingWrites.delete(e),n(void 0,f)):r=setTimeout(o,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:D,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(r),s)}),r=setTimeout(o,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&ja.test(e))return!0;if(!this._userIgnored){const{cwd:s}=this.options,n=this.options.ignored,r=n&&n.map(mn(s)),i=Au(r).filter(o=>typeof o===mu&&!hu(o)).map(o=>o+Fu),D=this._getGlobIgnored().map(mn(s)).concat(r,i);this._userIgnored=fu(D,void 0,gu)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const s=u||this.options.disableGlobbing||!hu(e)?e:Ta(e),n=this.options.followSymlinks;return new il(e,s,n,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new sl(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const s=(e&&Number.parseInt(e.mode,10))&511;return!!(4&Number.parseInt(s.toString(8)[0],10))}_remove(e,u,s){const n=v.join(e,u),r=v.resolve(n);if(s=s!=null?s:this._watched.has(n)||this._watched.has(r),!this._throttle("remove",n,100))return;!s&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(n).getChildren().forEach(l=>this._remove(n,l));const o=this._getWatchedDir(e),a=o.has(u);o.remove(u),this._symlinkPaths.has(r)&&this._symlinkPaths.delete(r);let c=n;if(this.options.cwd&&(c=v.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===lt)return;this._watched.delete(n),this._watched.delete(r);const f=s?Ia:hn;a&&!this._isIgnored(n)&&this._emit(f,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);u&&(u.forEach(s=>s()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let s=this._closers.get(e);s||(s=[],this._closers.set(e,s)),s.push(u)}_readdirp(e,u){if(this.closed)return;const s={type:du,alwaysStat:!0,lstat:!0,...u};let n=$a(e,s);return this._streams.add(n),n.once(ka,()=>{n=void 0}),n.once(Ma,()=>{n&&(this._streams.delete(n),n=void 0)}),n}}const ol=(t,e)=>{const u=new Dl(e);return u.add(t),u};var al=ol;let ce=!0;const ge=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Ne=0;if(ge.process&&ge.process.env&&ge.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,NO_COLOR:u,TERM:s,COLORTERM:n}=ge.process.env;e||u||t==="0"?ce=!1:t==="1"||t==="2"||t==="3"?ce=!0:s==="dumb"?ce=!1:"CI"in ge.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in ge.process.env)?ce=!0:ce=process.stdout.isTTY,ce&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?Ne=3:s&&(s.endsWith("-256color")||s.endsWith("256"))?Ne=2:Ne=1)}let _n={enabled:ce,supportLevel:Ne};function He(t,e,u=1){const s=`\x1B[${t}m`,n=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return i=>_n.enabled&&_n.supportLevel>=u?s+(""+i).replace(r,s)+n:""+i}const Le=He(33,39),ll=He(90,39),cl=He(92,39),fl=He(95,39),hl=He(96,39),ct=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}},An=(t,e=process.argv.slice(2))=>(Ru(t,e,{ignore:ct()}),e),dl=t=>{let e=Buffer.alloc(0);return u=>{for(e=Buffer.concat([e,u]);e.length>4;){const s=e.readInt32BE(0);if(e.length>=4+s){const n=e.slice(4,4+s);t(n),e=e.slice(4+s)}else break}}},yn=async()=>{const t=Nn.createServer(u=>{u.on("data",dl(s=>{const n=JSON.parse(s.toString());t.emit("data",n)}))}),e=Ln.getPipePath(process.pid);return await te.promises.mkdir(Hn.tmpdir,{recursive:!0}),await new Promise((u,s)=>{t.listen(e,u),t.on("error",s)}),t.unref(),process.on("exit",()=>{if(t.close(),process.platform!=="win32")try{te.rmSync(e)}catch{}}),t},El=()=>new Date().toLocaleTimeString(),Ie=(...t)=>console.log(ll(El()),hl("[tsx]"),...t),pl="\x1Bc",Cl=(t,e)=>{let u;return function(){u&&clearTimeout(u),u=setTimeout(()=>Reflect.apply(t,this,arguments),e)}},wn={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},Fl=ei({name:"watch",parameters:["<script path>"],flags:wn,help:{description:"Run the script and watch for changes"},ignoreArgv:ct(!1)},async t=>{const e=An(wn,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let s,n=!1;(({ on() {} })).on("data",l=>{if(l&&typeof l=="object"&&"type"in l&&l.type==="dependency"&&"path"in l&&typeof l.path=="string"){const E=l.path.startsWith("file:")?yu.fileURLToPath(l.path):l.path;K.isAbsolute(E)&&f.add(E)}});const i=()=>{if(!n)return Ds(e,u)};let D=!1;const o=async(l,E="SIGTERM",p=5e3)=>{let F=!1;const A=new Promise(B=>{l.on("exit",N=>{F=!0,D=!1,B(N)})});return D=!0,l.kill(E),setTimeout(()=>{F||(Ie(Le(`Process didn't exit in ${Math.floor(p/1e3)}s. Force killing...`)),l.kill("SIGKILL"))},p),await A},a=Cl(async(l,E)=>{const p=l?`${l?fl(l):""}${E?` in ${cl(`./${E}`)}`:""}`:"";if(D){Ie(p,Le("Process hasn't exited. Killing process...")),s.kill("SIGKILL");return}s&&(s.exitCode===null?(Ie(p,Le("Restarting...")),await o(s)):Ie(p,Le("Rerunning...")),u.clearScreen&&process.stdout.write(pl)),s=i()},100);a();const c=l=>{n=!0,(s==null?void 0:s.exitCode)===null?(D&&Ie(Le("Previous process hasn't exited yet. Force killing...")),o(s,D?"SIGKILL":l).then(E=>{process.exit(E!=null?E:0)},()=>{})):process.exit(me.constants.signals[l])};process.on("SIGINT",c),process.on("SIGTERM",c);const f=al(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",a);process.stdin.on("data",()=>a("Return key"))}),gl=(t,e)=>{let u;e.on("data",r=>{r&&r.type==="signal"&&u&&u(r.signal)});const s=()=>{const r=new Promise(i=>{setTimeout(()=>i(void 0),30),u=i});return r.then(()=>{u=void 0},()=>{}),r},n=async r=>{await s()!==r&&(t.kill(r),await s()!==r&&(t.on("exit",()=>{const o=me.constants.signals[r];process.exit(128+o)}),t.kill("SIGKILL")))};process.on("SIGINT",n),process.on("SIGTERM",n)},Rn={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};Ku({name:"tsx",parameters:["[script path]"],commands:[Fl],flags:{...Rn,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:ct()},async t=>{t.flags.version?process.stdout.write(`tsx v${$n.version}
 node `):t.flags.help&&(t.showHelp({description:"Node.js runtime enhanced with esbuild for loading TypeScript & ESM"}),console.log(`${"-".repeat(45)}
-`));const e={eval:{type:String,alias:"e"},print:{type:String,alias:"p"}},{_:u,flags:s}=Ku({flags:{...e,inputType:String,test:Boolean},help:!1,ignoreArgv:ct(!1)}),n=An({...Rn,...e}),i=["print","eval"].find(a=>!!s[a]);if(i){const{inputType:a}=s,c=s[i],f=Sn.transformSync(c,{loader:"default",sourcefile:"/eval.ts",format:a==="module"?"esm":"cjs"});n.unshift(`--${i}`,f.code)}Ge.isFeatureSupported(Ge.testRunnerGlob)&&s.test&&u.length===0&&n.push("**/{test,test/**/*,test-*,*[.-_]test}.?(c|m)@(t|j)s");const D=await yn(),o=Ds(n,{noCache:!!t.flags.noCache,tsconfigPath:t.flags.tsconfig});gl(o,D),process.send&&o.on("message",a=>{process.send(a)}),o.send&&process.on("message",a=>{o.send(a)}),o.on("close",a=>{a===null&&(a=me.constants.signals[o.signalCode]+128),process.exit(a)})});
+`));const e={eval:{type:String,alias:"e"},print:{type:String,alias:"p"}},{_:u,flags:s}=Ku({flags:{...e,inputType:String,test:Boolean},help:!1,ignoreArgv:ct(!1)}),n=An({...Rn,...e}),i=["print","eval"].find(a=>!!s[a]);if(i){const{inputType:a}=s,c=s[i],f=Sn.transformSync(c,{loader:"default",sourcefile:"/eval.ts",format:a==="module"?"esm":"cjs"});n.unshift(`--${i}`,f.code)}Ge.isFeatureSupported(Ge.testRunnerGlob)&&s.test&&u.length===0&&n.push("**/{test,test/**/*,test-*,*[.-_]test}.?(c|m)@(t|j)s");const D=({ on() {} }),o=Ds(n,{noCache:!!t.flags.noCache,tsconfigPath:t.flags.tsconfig});gl(o,D),process.send&&o.on("message",a=>{process.send(a)}),o.send&&process.on("message",a=>{o.send(a)}),o.on("close",a=>{a===null&&(a=me.constants.signals[o.signalCode]+128),process.exit(a)})});
diff --git a/dist/cli.mjs b/dist/cli.mjs
index f49defccadb151da8933f51fe6abaf313c7ded99..c7c454030a109d8f4530fff55ac41c1cc8fc68a5 100755
--- a/dist/cli.mjs
+++ b/dist/cli.mjs
@@ -50,6 +50,6 @@ import Au,{constants as ft}from"os";import Bn from"tty";import{transformSync as
  * Copyright (c) 2014-present, Jon Schlinkert.
  * Licensed under the MIT License.
  */const sD=me,Ms=uD,Ws=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),nD=t=>e=>t===!0?Number(e):String(e),Xt=t=>typeof t=="number"||typeof t=="string"&&t!=="",be=t=>Number.isInteger(+t),Qt=t=>{let e=`${t}`,u=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++u]==="0";);return u>0},rD=(t,e,u)=>typeof t=="string"||typeof e=="string"?!0:u.stringify===!0,iD=(t,e,u)=>{if(e>0){let s=t[0]==="-"?"-":"";s&&(t=t.slice(1)),t=s+t.padStart(s?e-1:e,"0")}return u===!1?String(t):t},Gs=(t,e)=>{let u=t[0]==="-"?"-":"";for(u&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return u?"-"+t:t},oD=(t,e)=>{t.negatives.sort((i,o)=>i<o?-1:i>o?1:0),t.positives.sort((i,o)=>i<o?-1:i>o?1:0);let u=e.capture?"":"?:",s="",n="",r;return t.positives.length&&(s=t.positives.join("|")),t.negatives.length&&(n=`-(${u}${t.negatives.join("|")})`),s&&n?r=`${s}|${n}`:r=s||n,e.wrap?`(${u}${r})`:r},js=(t,e,u,s)=>{if(u)return Ms(t,e,{wrap:!1,...s});let n=String.fromCharCode(t);if(t===e)return n;let r=String.fromCharCode(e);return`[${n}-${r}]`},Us=(t,e,u)=>{if(Array.isArray(t)){let s=u.wrap===!0,n=u.capture?"":"?:";return s?`(${n}${t.join("|")})`:t.join("|")}return Ms(t,e,u)},Ks=(...t)=>new RangeError("Invalid range arguments: "+sD.inspect(...t)),Vs=(t,e,u)=>{if(u.strictRanges===!0)throw Ks([t,e]);return[]},DD=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},aD=(t,e,u=1,s={})=>{let n=Number(t),r=Number(e);if(!Number.isInteger(n)||!Number.isInteger(r)){if(s.strictRanges===!0)throw Ks([t,e]);return[]}n===0&&(n=0),r===0&&(r=0);let i=n>r,o=String(t),D=String(e),a=String(u);u=Math.max(Math.abs(u),1);let c=Qt(o)||Qt(D)||Qt(a),f=c?Math.max(o.length,D.length,a.length):0,l=c===!1&&rD(t,e,s)===!1,E=s.transform||nD(l);if(s.toRegex&&u===1)return js(Gs(t,f),Gs(e,f),!0,s);let p={negatives:[],positives:[]},F=N=>p[N<0?"negatives":"positives"].push(Math.abs(N)),A=[],B=0;for(;i?n>=r:n<=r;)s.toRegex===!0&&u>1?F(n):A.push(iD(E(n,B),f,l)),n=i?n-u:n+u,B++;return s.toRegex===!0?u>1?oD(p,s):Us(A,null,{wrap:!1,...s}):A},lD=(t,e,u=1,s={})=>{if(!be(t)&&t.length>1||!be(e)&&e.length>1)return Vs(t,e,s);let n=s.transform||(l=>String.fromCharCode(l)),r=`${t}`.charCodeAt(0),i=`${e}`.charCodeAt(0),o=r>i,D=Math.min(r,i),a=Math.max(r,i);if(s.toRegex&&u===1)return js(D,a,!1,s);let c=[],f=0;for(;o?r>=i:r<=i;)c.push(n(r,f)),r=o?r-u:r+u,f++;return s.toRegex===!0?Us(c,null,{wrap:!1,options:s}):c},tt=(t,e,u,s={})=>{if(e==null&&Xt(t))return[t];if(!Xt(t)||!Xt(e))return Vs(t,e,s);if(typeof u=="function")return tt(t,e,1,{transform:u});if(Ws(u))return tt(t,e,0,u);let n={...s};return n.capture===!0&&(n.wrap=!0),u=u||n.step||1,be(u)?be(t)&&be(e)?aD(t,e,u,n):lD(t,e,Math.max(Math.abs(u),1),n):u!=null&&!Ws(u)?DD(u,n):tt(t,e,1,u)};var zs=tt;const cD=zs,Ys=et,fD=(t,e={})=>{let u=(s,n={})=>{let r=Ys.isInvalidBrace(n),i=s.invalid===!0&&e.escapeInvalid===!0,o=r===!0||i===!0,D=e.escapeInvalid===!0?"\\":"",a="";if(s.isOpen===!0||s.isClose===!0)return D+s.value;if(s.type==="open")return o?D+s.value:"(";if(s.type==="close")return o?D+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":o?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){let c=Ys.reduce(s.nodes),f=cD(...c,{...e,wrap:!1,toRegex:!0});if(f.length!==0)return c.length>1&&f.length>1?`(${f})`:f}if(s.nodes)for(let c of s.nodes)a+=u(c,s);return a};return u(t)};var hD=fD;const dD=zs,qs=Yt,pe=et,ae=(t="",e="",u=!1)=>{let s=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return u?pe.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let r of n)s.push(ae(r,e,u));else for(let r of e)u===!0&&typeof r=="string"&&(r=`{${r}}`),s.push(Array.isArray(r)?ae(n,r,u):n+r);return pe.flatten(s)},ED=(t,e={})=>{let u=e.rangeLimit===void 0?1e3:e.rangeLimit,s=(n,r={})=>{n.queue=[];let i=r,o=r.queue;for(;i.type!=="brace"&&i.type!=="root"&&i.parent;)i=i.parent,o=i.queue;if(n.invalid||n.dollar){o.push(ae(o.pop(),qs(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){o.push(ae(o.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let f=pe.reduce(n.nodes);if(pe.exceedsLimit(...f,e.step,u))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=dD(...f,e);l.length===0&&(l=qs(n,e)),o.push(ae(o.pop(),l)),n.nodes=[];return}let D=pe.encloseBrace(n),a=n.queue,c=n;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,a=c.queue;for(let f=0;f<n.nodes.length;f++){let l=n.nodes[f];if(l.type==="comma"&&n.type==="brace"){f===1&&a.push(""),a.push("");continue}if(l.type==="close"){o.push(ae(o.pop(),a,D));continue}if(l.value&&l.type!=="open"){a.push(ae(a.pop(),l.value));continue}l.nodes&&s(l,n)}return a};return pe.flatten(s(t))};var pD=ED,CD={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
-`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const FD=Yt,{MAX_LENGTH:Xs,CHAR_BACKSLASH:Zt,CHAR_BACKTICK:gD,CHAR_COMMA:mD,CHAR_DOT:_D,CHAR_LEFT_PARENTHESES:AD,CHAR_RIGHT_PARENTHESES:yD,CHAR_LEFT_CURLY_BRACE:wD,CHAR_RIGHT_CURLY_BRACE:RD,CHAR_LEFT_SQUARE_BRACKET:Qs,CHAR_RIGHT_SQUARE_BRACKET:Zs,CHAR_DOUBLE_QUOTE:bD,CHAR_SINGLE_QUOTE:vD,CHAR_NO_BREAK_SPACE:BD,CHAR_ZERO_WIDTH_NOBREAK_SPACE:SD}=CD,$D=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},s=typeof u.maxLength=="number"?Math.min(Xs,u.maxLength):Xs;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let n={type:"root",input:t,nodes:[]},r=[n],i=n,o=n,D=0,a=t.length,c=0,f=0,l;const E=()=>t[c++],p=F=>{if(F.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&F.type==="text"){o.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=o,o=F,F};for(p({type:"bos"});c<a;)if(i=r[r.length-1],l=E(),!(l===SD||l===BD)){if(l===Zt){p({type:"text",value:(e.keepEscaping?l:"")+E()});continue}if(l===Zs){p({type:"text",value:"\\"+l});continue}if(l===Qs){D++;let F;for(;c<a&&(F=E());){if(l+=F,F===Qs){D++;continue}if(F===Zt){l+=E();continue}if(F===Zs&&(D--,D===0))break}p({type:"text",value:l});continue}if(l===AD){i=p({type:"paren",nodes:[]}),r.push(i),p({type:"text",value:l});continue}if(l===yD){if(i.type!=="paren"){p({type:"text",value:l});continue}i=r.pop(),p({type:"text",value:l}),i=r[r.length-1];continue}if(l===bD||l===vD||l===gD){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=E());){if(A===Zt){l+=A+E();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}p({type:"text",value:l});continue}if(l===wD){f++;let A={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=p(A),r.push(i),p({type:"open",value:l});continue}if(l===RD){if(i.type!=="brace"){p({type:"text",value:l});continue}let F="close";i=r.pop(),i.close=!0,p({type:F,value:l}),f--,i=r[r.length-1];continue}if(l===mD&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:FD(i)}]}p({type:"comma",value:l}),i.commas++;continue}if(l===_D&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){p({type:"text",value:l});continue}if(o.type==="dot"){if(i.range=[],o.value+=l,o.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,o.type="text";continue}i.ranges++,i.args=[];continue}if(o.type==="range"){F.pop();let A=F[F.length-1];A.value+=o.value+l,o=A,i.ranges--;continue}p({type:"dot",value:l});continue}p({type:"text",value:l})}do if(i=r.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=r[r.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(r.length>0);return p({type:"eos"}),n};var TD=$D;const Js=Yt,xD=hD,OD=pD,ND=TD,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let s of t){let n=Y.create(s,e);Array.isArray(n)?u.push(...n):u.push(n)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>ND(t,e),Y.stringify=(t,e={})=>Js(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),xD(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=OD(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var HD=Y,LD=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"],ID=LD;const PD=K,kD=ID,MD=new Set(kD);var WD=t=>MD.has(PD.extname(t).slice(1).toLowerCase()),ut={};(function(t){const{sep:e}=K,{platform:u}=process,s=Au;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=n=>n,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=s.type()==="OS400"})(ut);const se=te,I=K,{promisify:ve}=me,GD=WD,{isWindows:jD,isLinux:UD,EMPTY_FN:KD,EMPTY_STR:VD,KEY_LISTENERS:Ce,KEY_ERR:Jt,KEY_RAW:Be,HANDLER_KEYS:zD,EV_CHANGE:st,EV_ADD:nt,EV_ADD_DIR:YD,EV_ERROR:en,STR_DATA:qD,STR_END:XD,BRACE_START:QD,STAR:ZD}=ut,JD="watch",ea=ve(se.open),tn=ve(se.stat),ta=ve(se.lstat),ua=ve(se.close),eu=ve(se.realpath),sa={lstat:ta,stat:tn},tu=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},Se=(t,e,u)=>{let s=t[e];s instanceof Set||(t[e]=s=new Set([s])),s.add(u)},na=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},$e=(t,e,u)=>{const s=t[e];s instanceof Set?s.delete(u):s===u&&delete t[e]},un=t=>t instanceof Set?t.size===0:!t,rt=new Map;function sn(t,e,u,s,n){const r=(i,o)=>{u(t),n(i,o,{watchedPath:t}),o&&t!==o&&it(I.resolve(t,o),Ce,I.join(t,o))};try{return se.watch(t,e,r)}catch(i){s(i)}}const it=(t,e,u,s,n)=>{const r=rt.get(t);r&&tu(r[e],i=>{i(u,s,n)})},ra=(t,e,u,s)=>{const{listener:n,errHandler:r,rawEmitter:i}=s;let o=rt.get(e),D;if(!u.persistent)return D=sn(t,u,n,r,i),D.close.bind(D);if(o)Se(o,Ce,n),Se(o,Jt,r),Se(o,Be,i);else{if(D=sn(t,u,it.bind(null,e,Ce),r,it.bind(null,e,Be)),!D)return;D.on(en,async a=>{const c=it.bind(null,e,Jt);if(o.watcherUnusable=!0,jD&&a.code==="EPERM")try{const f=await ea(t,"r");await ua(f),c(a)}catch{}else c(a)}),o={listeners:n,errHandlers:r,rawEmitters:i,watcher:D},rt.set(e,o)}return()=>{$e(o,Ce,n),$e(o,Jt,r),$e(o,Be,i),un(o.listeners)&&(o.watcher.close(),rt.delete(e),zD.forEach(na(o)),o.watcher=void 0,Object.freeze(o))}},uu=new Map,ia=(t,e,u,s)=>{const{listener:n,rawEmitter:r}=s;let i=uu.get(e);const o=i&&i.options;return o&&(o.persistent<u.persistent||o.interval>u.interval)&&(i.listeners,i.rawEmitters,se.unwatchFile(e),i=void 0),i?(Se(i,Ce,n),Se(i,Be,r)):(i={listeners:n,rawEmitters:r,options:u,watcher:se.watchFile(e,u,(D,a)=>{tu(i.rawEmitters,f=>{f(st,e,{curr:D,prev:a})});const c=D.mtimeMs;(D.size!==a.size||c>a.mtimeMs||c===0)&&tu(i.listeners,f=>f(t,D))})},uu.set(e,i)),()=>{$e(i,Ce,n),$e(i,Be,r),un(i.listeners)&&(uu.delete(e),se.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};let oa=class{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const s=this.fsw.options,n=I.dirname(e),r=I.basename(e);this.fsw._getWatchedDir(n).add(r);const o=I.resolve(e),D={persistent:s.persistent};u||(u=KD);let a;return s.usePolling?(D.interval=s.enableBinaryInterval&&GD(r)?s.binaryInterval:s.interval,a=ia(e,o,D,{listener:u,rawEmitter:this.fsw._emitRaw})):a=ra(e,o,D,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,s){if(this.fsw.closed)return;const n=I.dirname(e),r=I.basename(e),i=this.fsw._getWatchedDir(n);let o=u;if(i.has(r))return;const D=async(c,f)=>{if(this.fsw._throttle(JD,e,5)){if(!f||f.mtimeMs===0)try{const l=await tn(e);if(this.fsw.closed)return;const E=l.atimeMs,p=l.mtimeMs;(!E||E<=p||p!==o.mtimeMs)&&this.fsw._emit(st,e,l),UD&&o.ino!==l.ino?(this.fsw._closeFile(c),o=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,D))):o=l}catch{this.fsw._remove(n,r)}else if(i.has(r)){const l=f.atimeMs,E=f.mtimeMs;(!l||l<=E||E!==o.mtimeMs)&&this.fsw._emit(st,e,f),o=f}}},a=this._watchWithNodeFs(e,D);if(!(s&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(nt,e,0))return;this.fsw._emit(nt,e,u)}return a}async _handleSymlink(e,u,s,n){if(this.fsw.closed)return;const r=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let o;try{o=await eu(s)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(n)?this.fsw._symlinkPaths.get(r)!==o&&(this.fsw._symlinkPaths.set(r,o),this.fsw._emit(st,s,e.stats)):(i.add(n),this.fsw._symlinkPaths.set(r,o),this.fsw._emit(nt,s,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(r))return!0;this.fsw._symlinkPaths.set(r,!0)}_handleRead(e,u,s,n,r,i,o){if(e=I.join(e,VD),!s.hasGlob&&(o=this.fsw._throttle("readdir",e,1e3),!o))return;const D=this.fsw._getWatchedDir(s.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>s.filterPath(f),directoryFilter:f=>s.filterDir(f),depth:0}).on(qD,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let E=I.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,E,l))){if(this.fsw.closed){c=void 0;return}(l===n||!n&&!D.has(l))&&(this.fsw._incrReadyCount(),E=I.join(r,I.relative(r,E)),this._addToNodeFs(E,u,s,i+1))}}).on(en,this._boundHandleError);return new Promise(f=>c.once(XD,()=>{if(this.fsw.closed){c=void 0;return}const l=o?o.clear():!1;f(),D.getChildren().filter(E=>E!==e&&!a.has(E)&&(!s.hasGlob||s.filterPath({fullPath:I.resolve(e,E)}))).forEach(E=>{this.fsw._remove(e,E)}),c=void 0,l&&this._handleRead(e,!1,s,n,r,i,o)}))}async _handleDir(e,u,s,n,r,i,o){const D=this.fsw._getWatchedDir(I.dirname(e)),a=D.has(I.basename(e));!(s&&this.fsw.options.ignoreInitial)&&!r&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(YD,e,u),D.add(I.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||n<=l)&&!this.fsw._symlinkPaths.has(o)){if(!r&&(await this._handleRead(e,s,i,r,e,n,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(E,p)=>{p&&p.mtimeMs===0||this._handleRead(E,!1,i,r,e,n,c)})}return f}async _addToNodeFs(e,u,s,n,r){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const o=this.fsw._getWatchHelpers(e,n);!o.hasGlob&&s&&(o.hasGlob=s.hasGlob,o.globFilter=s.globFilter,o.filterPath=D=>s.filterPath(D),o.filterDir=D=>s.filterDir(D));try{const D=await sa[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,D))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(ZD)&&!e.includes(QD);let c;if(D.isDirectory()){const f=I.resolve(e),l=a?await eu(e):e;if(this.fsw.closed||(c=await this._handleDir(o.watchPath,D,u,n,r,o,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(D.isSymbolicLink()){const f=a?await eu(e):e;if(this.fsw.closed)return;const l=I.dirname(o.watchPath);if(this.fsw._getWatchedDir(l).add(o.watchPath),this.fsw._emit(nt,o.watchPath,D),c=await this._handleDir(l,D,u,n,e,o,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(I.resolve(e),f)}else c=this._handleFile(o.watchPath,D,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(D){if(this.fsw._handleError(D))return i(),e}}};var Da=oa,su={exports:{}};const nu=te,P=K,{promisify:ru}=me;let Fe;try{Fe=ht("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(Fe){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(Fe=void 0)}}const{EV_ADD:iu,EV_CHANGE:aa,EV_ADD_DIR:nn,EV_UNLINK:ot,EV_ERROR:la,STR_DATA:ca,STR_END:fa,FSEVENT_CREATED:ha,FSEVENT_MODIFIED:da,FSEVENT_DELETED:Ea,FSEVENT_MOVED:pa,FSEVENT_UNKNOWN:Ca,FSEVENT_TYPE_FILE:Fa,FSEVENT_TYPE_DIRECTORY:Te,FSEVENT_TYPE_SYMLINK:rn,ROOT_GLOBSTAR:on,DIR_SUFFIX:ga,DOT_SLASH:Dn,FUNCTION_TYPE:ou,EMPTY_FN:ma,IDENTITY_FN:_a}=ut,Aa=t=>isNaN(t)?{}:{depth:t},Du=ru(nu.stat),ya=ru(nu.lstat),an=ru(nu.realpath),wa={stat:Du,lstat:ya},le=new Map,Ra=10,ba=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),va=(t,e)=>({stop:Fe.watch(t,e)});function Ba(t,e,u,s){let n=P.extname(e)?P.dirname(e):e;const r=P.dirname(n);let i=le.get(n);Sa(r)&&(n=r);const o=P.resolve(t),D=o!==e,a=(f,l,E)=>{D&&(f=f.replace(e,o)),(f===o||!f.indexOf(o+P.sep))&&u(f,l,E)};let c=!1;for(const f of le.keys())if(e.indexOf(P.resolve(f)+P.sep)===0){n=f,i=le.get(n),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:s,watcher:va(n,(f,l)=>{if(!i.listeners.size)return;const E=Fe.getInfo(f,l);i.listeners.forEach(p=>{p(f,l,E)}),i.rawEmitter(E.event,f,E)})},le.set(n,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(le.delete(n),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const Sa=t=>{let e=0;for(const u of le.keys())if(u.indexOf(t)===0&&(e++,e>=Ra))return!0;return!1},$a=()=>Fe&&le.size<128,au=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=P.dirname(t))!==e;)u++;return u},ln=(t,e)=>t.type===Te&&e.isDirectory()||t.type===rn&&e.isSymbolicLink()||t.type===Fa&&e.isFile();let Ta=class{constructor(e){this.fsw=e}checkIgnored(e,u){const s=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return s.add(e),u&&u.isDirectory()&&s.add(e+on),!0;s.delete(e),s.delete(e+on)}addOrChange(e,u,s,n,r,i,o,D){const a=r.has(i)?aa:iu;this.handleEvent(a,e,u,s,n,r,i,o,D)}async checkExists(e,u,s,n,r,i,o,D){try{const a=await Du(e);if(this.fsw.closed)return;ln(o,a)?this.addOrChange(e,u,s,n,r,i,o,D):this.handleEvent(ot,e,u,s,n,r,i,o,D)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,s,n,r,i,o,D):this.handleEvent(ot,e,u,s,n,r,i,o,D)}}handleEvent(e,u,s,n,r,i,o,D,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===ot){const c=D.type===Te;(c||i.has(o))&&this.fsw._remove(r,o,c)}else{if(e===iu){if(D.type===Te&&this.fsw._getWatchedDir(u),D.type===rn&&a.followSymlinks){const f=a.depth===void 0?void 0:au(s,n)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(r).add(o)}const c=D.type===Te?e+ga:e;this.fsw._emit(c,u),c===nn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,s,n){if(this.fsw.closed||this.fsw._isIgnored(e))return;const r=this.fsw.options,o=Ba(e,u,async(D,a,c)=>{if(this.fsw.closed||r.depth!==void 0&&au(D,u)>r.depth)return;const f=s(P.join(e,P.relative(e,D)));if(n&&!n(f))return;const l=P.dirname(f),E=P.basename(f),p=this.fsw._getWatchedDir(c.type===Te?f:l);if(ba.has(a)||c.event===Ca)if(typeof r.ignored===ou){let F;try{F=await Du(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;ln(c,F)?this.addOrChange(f,D,u,l,p,E,c,r):this.handleEvent(ot,f,D,u,l,p,E,c,r)}else this.checkExists(f,D,u,l,p,E,c,r);else switch(c.event){case ha:case da:return this.addOrChange(f,D,u,l,p,E,c,r);case Ea:case pa:return this.checkExists(f,D,u,l,p,E,c,r)}},this.fsw._emitRaw);return this.fsw._emitReady(),o}async _handleFsEventsSymlink(e,u,s,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const r=await an(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(r))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(r||e,i=>{let o=e;return r&&r!==Dn?o=i.replace(r,e):i!==Dn&&(o=P.join(e,i)),s(o)},!1,n)}catch(r){if(this.fsw._handleError(r))return this.fsw._emitReady()}}}emitAdd(e,u,s,n,r){const i=s(e),o=u.isDirectory(),D=this.fsw._getWatchedDir(P.dirname(i)),a=P.basename(i);o&&this.fsw._getWatchedDir(i),!D.has(a)&&(D.add(a),(!n.ignoreInitial||r===!0)&&this.fsw._emit(o?nn:iu,i,u))}initWatch(e,u,s,n){if(this.fsw.closed)return;const r=this._watchWithFsEvents(s.watchPath,P.resolve(e||s.watchPath),n,s.globFilter);this.fsw._addPathCloser(u,r)}async _addToFsEvents(e,u,s,n){if(this.fsw.closed)return;const r=this.fsw.options,i=typeof u===ou?u:_a,o=this.fsw._getWatchHelpers(e);try{const D=await wa[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,D))throw null;if(D.isDirectory()){if(o.globFilter||this.emitAdd(i(e),D,i,r,s),n&&n>r.depth)return;this.fsw._readdirp(o.watchPath,{fileFilter:a=>o.filterPath(a),directoryFilter:a=>o.filterDir(a),...Aa(r.depth-(n||0))}).on(ca,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!o.filterPath(a))return;const c=P.join(o.watchPath,a.path),{fullPath:f}=a;if(o.followSymlinks&&a.stats.isSymbolicLink()){const l=r.depth===void 0?void 0:au(c,P.resolve(o.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,r,s)}).on(la,ma).on(fa,()=>{this.fsw._emitReady()})}else this.emitAdd(o.watchPath,D,i,r,s),this.fsw._emitReady()}catch(D){(!D||this.fsw._handleError(D))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(r.persistent&&s!==!0)if(typeof u===ou)this.initWatch(void 0,e,o,i);else{let D;try{D=await an(o.watchPath)}catch{}this.initWatch(D,e,o,i)}}};su.exports=Ta,su.exports.canUse=$a;var xa=su.exports;const{EventEmitter:Oa}=Ln,lu=te,v=K,{promisify:cn}=me,Na=So,cu=Ho.default,Ha=zo,fu=Ts,La=HD,Ia=bs,Pa=Da,fn=xa,{EV_ALL:hu,EV_READY:ka,EV_ADD:Dt,EV_CHANGE:xe,EV_UNLINK:hn,EV_ADD_DIR:Ma,EV_UNLINK_DIR:Wa,EV_RAW:Ga,EV_ERROR:du,STR_CLOSE:ja,STR_END:Ua,BACK_SLASH_RE:Ka,DOUBLE_SLASH_RE:dn,SLASH_OR_BACK_SLASH_RE:Va,DOT_RE:za,REPLACER_RE:Ya,SLASH:Eu,SLASH_SLASH:qa,BRACE_START:Xa,BANG:pu,ONE_DOT:En,TWO_DOTS:Qa,GLOBSTAR:Za,SLASH_GLOBSTAR:Cu,ANYMATCH_OPTS:Fu,STRING_TYPE:gu,FUNCTION_TYPE:Ja,EMPTY_STR:mu,EMPTY_FN:el,isWindows:tl,isMacos:ul,isIBMi:sl}=ut,nl=cn(lu.stat),rl=cn(lu.readdir),_u=(t=[])=>Array.isArray(t)?t:[t],pn=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?pn(u,e):e.push(u)}),e),Cn=t=>{const e=pn(_u(t));if(!e.every(u=>typeof u===gu))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(gn)},Fn=t=>{let e=t.replace(Ka,Eu),u=!1;for(e.startsWith(qa)&&(u=!0);e.match(dn);)e=e.replace(dn,Eu);return u&&(e=Eu+e),e},gn=t=>Fn(v.normalize(Fn(t))),mn=(t=mu)=>e=>typeof e!==gu?e:gn(v.isAbsolute(e)?e:v.join(t,e)),il=(t,e)=>v.isAbsolute(t)?t:t.startsWith(pu)?pu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class ol{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;u&&e!==En&&e!==Qa&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const s=this.path;try{await rl(s)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(s),v.basename(s))}}has(e){const{items:u}=this;if(u)return u.has(e)}getChildren(){const{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const Dl="stat",al="lstat";class ll{constructor(e,u,s,n){this.fsw=n,this.path=e=e.replace(Ya,mu),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===mu&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&s?void 0:!1,this.globFilter=this.hasGlob?cu(e,void 0,Fu):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(r=>{r.length>1&&r.pop()}),this.followSymlinks=s,this.statMethod=s?Dl:al}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const s=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===Ja?this.globFilter(s):!0)&&this.fsw._isntIgnored(s,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Xa)?La.expand(e):[e]).forEach(n=>{u.push(v.relative(this.watchPath,n).split(Va))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let s=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((r,i)=>(r===Za&&(s=!0),s||!u[0][i]||cu(r,u[0][i],Fu))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class cl extends Oa{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),fn.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=ul),sl&&(u.usePolling=!0);const n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){const D=n.toLowerCase();D==="false"||D==="0"?u.usePolling=!1:D==="true"||D==="1"?u.usePolling=!0:u.usePolling=!!D}const r=process.env.CHOKIDAR_INTERVAL;r&&(u.interval=Number.parseInt(r,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=_u(u.ignored));let o=0;this._emitReady=()=>{o++,o>=this._readyCount&&(this._emitReady=el,this._readyEmitted=!0,process.nextTick(()=>this.emit(ka)))},this._emitRaw=(...D)=>this.emit(Ga,...D),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new fn(this):this._nodeFsHandler=new Pa(this),Object.freeze(u)}add(e,u,s){const{cwd:n,disableGlobbing:r}=this.options;this.closed=!1;let i=Cn(e);return n&&(i=i.map(o=>{const D=il(o,n);return r||!fu(o)?D:Ia(D)})),i=i.filter(o=>o.startsWith(pu)?(this._ignoredPaths.add(o.slice(1)),!1):(this._ignoredPaths.delete(o),this._ignoredPaths.delete(o+Cu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(o=>this._fsEventsHandler._addToFsEvents(o))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async o=>{const D=await this._nodeFsHandler._addToNodeFs(o,!s,0,0,u);return D&&this._emitReady(),D})).then(o=>{this.closed||o.filter(D=>D).forEach(D=>{this.add(v.dirname(D),v.basename(u||D))})})),this}unwatch(e){if(this.closed)return this;const u=Cn(e),{cwd:s}=this.options;return u.forEach(n=>{!v.isAbsolute(n)&&!this._closers.has(n)&&(s&&(n=v.join(s,n)),n=v.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+Cu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(s=>{const n=s();n instanceof Promise&&e.push(n)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,s)=>{const n=this.options.cwd?v.relative(this.options.cwd,s):s;e[n||En]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==du&&this.emit(hu,...u)}async _emit(e,u,s,n,r){if(this.closed)return;const i=this.options;tl&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const o=[e,u];r!==void 0?o.push(s,n,r):n!==void 0?o.push(s,n):s!==void 0&&o.push(s);const D=i.awaitWriteFinish;let a;if(D&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===hn)return this._pendingUnlinks.set(u,o),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(hu,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===Dt&&this._pendingUnlinks.has(u)&&(e=o[0]=xe,this._pendingUnlinks.delete(u))}if(D&&(e===Dt||e===xe)&&this._readyEmitted){const c=(f,l)=>{f?(e=o[0]=du,o[1]=f,this.emitWithAll(e,o)):l&&(o.length>2?o[2]=l:o.push(l),this.emitWithAll(e,o))};return this._awaitWriteFinish(u,D.stabilityThreshold,e,c),this}if(e===xe&&!this._throttle(xe,u,50))return this;if(i.alwaysStat&&s===void 0&&(e===Dt||e===Ma||e===xe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await nl(c)}catch{}if(!f||this.closed)return;o.push(f)}return this.emitWithAll(e,o),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(du,e),e||this.closed}_throttle(e,u,s){this._throttled.has(e)||this._throttled.set(e,new Map);const n=this._throttled.get(e),r=n.get(u);if(r)return r.count++,!1;let i;const o=()=>{const a=n.get(u),c=a?a.count:0;return n.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(o,s);const D={timeoutObject:i,clear:o,count:0};return n.set(u,D),D}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,s,n){let r,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const o=new Date,D=a=>{lu.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&n(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const E=this._pendingWrites.get(e);l-E.lastChange>=u?(this._pendingWrites.delete(e),n(void 0,f)):r=setTimeout(D,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:o,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(r),s)}),r=setTimeout(D,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&za.test(e))return!0;if(!this._userIgnored){const{cwd:s}=this.options,n=this.options.ignored,r=n&&n.map(mn(s)),i=_u(r).filter(D=>typeof D===gu&&!fu(D)).map(D=>D+Cu),o=this._getGlobIgnored().map(mn(s)).concat(r,i);this._userIgnored=cu(o,void 0,Fu)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const s=u||this.options.disableGlobbing||!fu(e)?e:Ha(e),n=this.options.followSymlinks;return new ll(e,s,n,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new ol(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const s=(e&&Number.parseInt(e.mode,10))&511;return!!(4&Number.parseInt(s.toString(8)[0],10))}_remove(e,u,s){const n=v.join(e,u),r=v.resolve(n);if(s=s!=null?s:this._watched.has(n)||this._watched.has(r),!this._throttle("remove",n,100))return;!s&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(n).getChildren().forEach(l=>this._remove(n,l));const D=this._getWatchedDir(e),a=D.has(u);D.remove(u),this._symlinkPaths.has(r)&&this._symlinkPaths.delete(r);let c=n;if(this.options.cwd&&(c=v.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===Dt)return;this._watched.delete(n),this._watched.delete(r);const f=s?Wa:hn;a&&!this._isIgnored(n)&&this._emit(f,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);u&&(u.forEach(s=>s()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let s=this._closers.get(e);s||(s=[],this._closers.set(e,s)),s.push(u)}_readdirp(e,u){if(this.closed)return;const s={type:hu,alwaysStat:!0,lstat:!0,...u};let n=Na(e,s);return this._streams.add(n),n.once(ja,()=>{n=void 0}),n.once(Ua,()=>{n&&(this._streams.delete(n),n=void 0)}),n}}const fl=(t,e)=>{const u=new cl(e);return u.add(t),u};var hl=fl;let ce=!0;const ge=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Oe=0;if(ge.process&&ge.process.env&&ge.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,NO_COLOR:u,TERM:s,COLORTERM:n}=ge.process.env;e||u||t==="0"?ce=!1:t==="1"||t==="2"||t==="3"?ce=!0:s==="dumb"?ce=!1:"CI"in ge.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in ge.process.env)?ce=!0:ce=process.stdout.isTTY,ce&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?Oe=3:s&&(s.endsWith("-256color")||s.endsWith("256"))?Oe=2:Oe=1)}let _n={enabled:ce,supportLevel:Oe};function Ne(t,e,u=1){const s=`\x1B[${t}m`,n=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return i=>_n.enabled&&_n.supportLevel>=u?s+(""+i).replace(r,s)+n:""+i}const He=Ne(33,39),dl=Ne(90,39),El=Ne(92,39),pl=Ne(95,39),Cl=Ne(96,39),at=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}},An=(t,e=process.argv.slice(2))=>(Ru(t,e,{ignore:at()}),e),Fl=t=>{let e=Buffer.alloc(0);return u=>{for(e=Buffer.concat([e,u]);e.length>4;){const s=e.readInt32BE(0);if(e.length>=4+s){const n=e.slice(4,4+s);t(n),e=e.slice(4+s)}else break}}},yn=async()=>{const t=Pn.createServer(u=>{u.on("data",Fl(s=>{const n=JSON.parse(s.toString());t.emit("data",n)}))}),e=Mn(process.pid);return await te.promises.mkdir(kn,{recursive:!0}),await new Promise((u,s)=>{t.listen(e,u),t.on("error",s)}),t.unref(),process.on("exit",()=>{if(t.close(),process.platform!=="win32")try{te.rmSync(e)}catch{}}),t},gl=()=>new Date().toLocaleTimeString(),Le=(...t)=>console.log(dl(gl()),Cl("[tsx]"),...t),ml="\x1Bc",_l=(t,e)=>{let u;return function(){u&&clearTimeout(u),u=setTimeout(()=>Reflect.apply(t,this,arguments),e)}},wn={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},Al=ni({name:"watch",parameters:["<script path>"],flags:wn,help:{description:"Run the script and watch for changes"},ignoreArgv:at(!1)},async t=>{const e=An(wn,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let s,n=!1;(await yn()).on("data",l=>{if(l&&typeof l=="object"&&"type"in l&&l.type==="dependency"&&"path"in l&&typeof l.path=="string"){const E=l.path.startsWith("file:")?xn(l.path):l.path;K.isAbsolute(E)&&f.add(E)}});const i=()=>{if(!n)return os(e,u)};let o=!1;const D=async(l,E="SIGTERM",p=5e3)=>{let F=!1;const A=new Promise(B=>{l.on("exit",N=>{F=!0,o=!1,B(N)})});return o=!0,l.kill(E),setTimeout(()=>{F||(Le(He(`Process didn't exit in ${Math.floor(p/1e3)}s. Force killing...`)),l.kill("SIGKILL"))},p),await A},a=_l(async(l,E)=>{const p=l?`${l?pl(l):""}${E?` in ${El(`./${E}`)}`:""}`:"";if(o){Le(p,He("Process hasn't exited. Killing process...")),s.kill("SIGKILL");return}s&&(s.exitCode===null?(Le(p,He("Restarting...")),await D(s)):Le(p,He("Rerunning...")),u.clearScreen&&process.stdout.write(ml)),s=i()},100);a();const c=l=>{n=!0,(s==null?void 0:s.exitCode)===null?(o&&Le(He("Previous process hasn't exited yet. Force killing...")),D(s,o?"SIGKILL":l).then(E=>{process.exit(E!=null?E:0)},()=>{})):process.exit(ft.signals[l])};process.on("SIGINT",c),process.on("SIGTERM",c);const f=hl(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",a);process.stdin.on("data",()=>a("Return key"))}),yl=(t,e)=>{let u;e.on("data",r=>{r&&r.type==="signal"&&u&&u(r.signal)});const s=()=>{const r=new Promise(i=>{setTimeout(()=>i(void 0),30),u=i});return r.then(()=>{u=void 0},()=>{}),r},n=async r=>{await s()!==r&&(t.kill(r),await s()!==r&&(t.on("exit",()=>{const D=ft.signals[r];process.exit(128+D)}),t.kill("SIGKILL")))};process.on("SIGINT",n),process.on("SIGTERM",n)},Rn={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};Ku({name:"tsx",parameters:["[script path]"],commands:[Al],flags:{...Rn,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:at()},async t=>{t.flags.version?process.stdout.write(`tsx v${$n}
+`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const FD=Yt,{MAX_LENGTH:Xs,CHAR_BACKSLASH:Zt,CHAR_BACKTICK:gD,CHAR_COMMA:mD,CHAR_DOT:_D,CHAR_LEFT_PARENTHESES:AD,CHAR_RIGHT_PARENTHESES:yD,CHAR_LEFT_CURLY_BRACE:wD,CHAR_RIGHT_CURLY_BRACE:RD,CHAR_LEFT_SQUARE_BRACKET:Qs,CHAR_RIGHT_SQUARE_BRACKET:Zs,CHAR_DOUBLE_QUOTE:bD,CHAR_SINGLE_QUOTE:vD,CHAR_NO_BREAK_SPACE:BD,CHAR_ZERO_WIDTH_NOBREAK_SPACE:SD}=CD,$D=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},s=typeof u.maxLength=="number"?Math.min(Xs,u.maxLength):Xs;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);let n={type:"root",input:t,nodes:[]},r=[n],i=n,o=n,D=0,a=t.length,c=0,f=0,l;const E=()=>t[c++],p=F=>{if(F.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&F.type==="text"){o.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=o,o=F,F};for(p({type:"bos"});c<a;)if(i=r[r.length-1],l=E(),!(l===SD||l===BD)){if(l===Zt){p({type:"text",value:(e.keepEscaping?l:"")+E()});continue}if(l===Zs){p({type:"text",value:"\\"+l});continue}if(l===Qs){D++;let F;for(;c<a&&(F=E());){if(l+=F,F===Qs){D++;continue}if(F===Zt){l+=E();continue}if(F===Zs&&(D--,D===0))break}p({type:"text",value:l});continue}if(l===AD){i=p({type:"paren",nodes:[]}),r.push(i),p({type:"text",value:l});continue}if(l===yD){if(i.type!=="paren"){p({type:"text",value:l});continue}i=r.pop(),p({type:"text",value:l}),i=r[r.length-1];continue}if(l===bD||l===vD||l===gD){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=E());){if(A===Zt){l+=A+E();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}p({type:"text",value:l});continue}if(l===wD){f++;let A={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=p(A),r.push(i),p({type:"open",value:l});continue}if(l===RD){if(i.type!=="brace"){p({type:"text",value:l});continue}let F="close";i=r.pop(),i.close=!0,p({type:F,value:l}),f--,i=r[r.length-1];continue}if(l===mD&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:FD(i)}]}p({type:"comma",value:l}),i.commas++;continue}if(l===_D&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){p({type:"text",value:l});continue}if(o.type==="dot"){if(i.range=[],o.value+=l,o.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,o.type="text";continue}i.ranges++,i.args=[];continue}if(o.type==="range"){F.pop();let A=F[F.length-1];A.value+=o.value+l,o=A,i.ranges--;continue}p({type:"dot",value:l});continue}p({type:"text",value:l})}do if(i=r.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=r[r.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(r.length>0);return p({type:"eos"}),n};var TD=$D;const Js=Yt,xD=hD,OD=pD,ND=TD,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let s of t){let n=Y.create(s,e);Array.isArray(n)?u.push(...n):u.push(n)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>ND(t,e),Y.stringify=(t,e={})=>Js(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),xD(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=OD(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var HD=Y,LD=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"],ID=LD;const PD=K,kD=ID,MD=new Set(kD);var WD=t=>MD.has(PD.extname(t).slice(1).toLowerCase()),ut={};(function(t){const{sep:e}=K,{platform:u}=process,s=Au;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=n=>n,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=s.type()==="OS400"})(ut);const se=te,I=K,{promisify:ve}=me,GD=WD,{isWindows:jD,isLinux:UD,EMPTY_FN:KD,EMPTY_STR:VD,KEY_LISTENERS:Ce,KEY_ERR:Jt,KEY_RAW:Be,HANDLER_KEYS:zD,EV_CHANGE:st,EV_ADD:nt,EV_ADD_DIR:YD,EV_ERROR:en,STR_DATA:qD,STR_END:XD,BRACE_START:QD,STAR:ZD}=ut,JD="watch",ea=ve(se.open),tn=ve(se.stat),ta=ve(se.lstat),ua=ve(se.close),eu=ve(se.realpath),sa={lstat:ta,stat:tn},tu=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},Se=(t,e,u)=>{let s=t[e];s instanceof Set||(t[e]=s=new Set([s])),s.add(u)},na=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},$e=(t,e,u)=>{const s=t[e];s instanceof Set?s.delete(u):s===u&&delete t[e]},un=t=>t instanceof Set?t.size===0:!t,rt=new Map;function sn(t,e,u,s,n){const r=(i,o)=>{u(t),n(i,o,{watchedPath:t}),o&&t!==o&&it(I.resolve(t,o),Ce,I.join(t,o))};try{return se.watch(t,e,r)}catch(i){s(i)}}const it=(t,e,u,s,n)=>{const r=rt.get(t);r&&tu(r[e],i=>{i(u,s,n)})},ra=(t,e,u,s)=>{const{listener:n,errHandler:r,rawEmitter:i}=s;let o=rt.get(e),D;if(!u.persistent)return D=sn(t,u,n,r,i),D.close.bind(D);if(o)Se(o,Ce,n),Se(o,Jt,r),Se(o,Be,i);else{if(D=sn(t,u,it.bind(null,e,Ce),r,it.bind(null,e,Be)),!D)return;D.on(en,async a=>{const c=it.bind(null,e,Jt);if(o.watcherUnusable=!0,jD&&a.code==="EPERM")try{const f=await ea(t,"r");await ua(f),c(a)}catch{}else c(a)}),o={listeners:n,errHandlers:r,rawEmitters:i,watcher:D},rt.set(e,o)}return()=>{$e(o,Ce,n),$e(o,Jt,r),$e(o,Be,i),un(o.listeners)&&(o.watcher.close(),rt.delete(e),zD.forEach(na(o)),o.watcher=void 0,Object.freeze(o))}},uu=new Map,ia=(t,e,u,s)=>{const{listener:n,rawEmitter:r}=s;let i=uu.get(e);const o=i&&i.options;return o&&(o.persistent<u.persistent||o.interval>u.interval)&&(i.listeners,i.rawEmitters,se.unwatchFile(e),i=void 0),i?(Se(i,Ce,n),Se(i,Be,r)):(i={listeners:n,rawEmitters:r,options:u,watcher:se.watchFile(e,u,(D,a)=>{tu(i.rawEmitters,f=>{f(st,e,{curr:D,prev:a})});const c=D.mtimeMs;(D.size!==a.size||c>a.mtimeMs||c===0)&&tu(i.listeners,f=>f(t,D))})},uu.set(e,i)),()=>{$e(i,Ce,n),$e(i,Be,r),un(i.listeners)&&(uu.delete(e),se.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};let oa=class{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const s=this.fsw.options,n=I.dirname(e),r=I.basename(e);this.fsw._getWatchedDir(n).add(r);const o=I.resolve(e),D={persistent:s.persistent};u||(u=KD);let a;return s.usePolling?(D.interval=s.enableBinaryInterval&&GD(r)?s.binaryInterval:s.interval,a=ia(e,o,D,{listener:u,rawEmitter:this.fsw._emitRaw})):a=ra(e,o,D,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,s){if(this.fsw.closed)return;const n=I.dirname(e),r=I.basename(e),i=this.fsw._getWatchedDir(n);let o=u;if(i.has(r))return;const D=async(c,f)=>{if(this.fsw._throttle(JD,e,5)){if(!f||f.mtimeMs===0)try{const l=await tn(e);if(this.fsw.closed)return;const E=l.atimeMs,p=l.mtimeMs;(!E||E<=p||p!==o.mtimeMs)&&this.fsw._emit(st,e,l),UD&&o.ino!==l.ino?(this.fsw._closeFile(c),o=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,D))):o=l}catch{this.fsw._remove(n,r)}else if(i.has(r)){const l=f.atimeMs,E=f.mtimeMs;(!l||l<=E||E!==o.mtimeMs)&&this.fsw._emit(st,e,f),o=f}}},a=this._watchWithNodeFs(e,D);if(!(s&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(nt,e,0))return;this.fsw._emit(nt,e,u)}return a}async _handleSymlink(e,u,s,n){if(this.fsw.closed)return;const r=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let o;try{o=await eu(s)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(n)?this.fsw._symlinkPaths.get(r)!==o&&(this.fsw._symlinkPaths.set(r,o),this.fsw._emit(st,s,e.stats)):(i.add(n),this.fsw._symlinkPaths.set(r,o),this.fsw._emit(nt,s,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(r))return!0;this.fsw._symlinkPaths.set(r,!0)}_handleRead(e,u,s,n,r,i,o){if(e=I.join(e,VD),!s.hasGlob&&(o=this.fsw._throttle("readdir",e,1e3),!o))return;const D=this.fsw._getWatchedDir(s.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>s.filterPath(f),directoryFilter:f=>s.filterDir(f),depth:0}).on(qD,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let E=I.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,E,l))){if(this.fsw.closed){c=void 0;return}(l===n||!n&&!D.has(l))&&(this.fsw._incrReadyCount(),E=I.join(r,I.relative(r,E)),this._addToNodeFs(E,u,s,i+1))}}).on(en,this._boundHandleError);return new Promise(f=>c.once(XD,()=>{if(this.fsw.closed){c=void 0;return}const l=o?o.clear():!1;f(),D.getChildren().filter(E=>E!==e&&!a.has(E)&&(!s.hasGlob||s.filterPath({fullPath:I.resolve(e,E)}))).forEach(E=>{this.fsw._remove(e,E)}),c=void 0,l&&this._handleRead(e,!1,s,n,r,i,o)}))}async _handleDir(e,u,s,n,r,i,o){const D=this.fsw._getWatchedDir(I.dirname(e)),a=D.has(I.basename(e));!(s&&this.fsw.options.ignoreInitial)&&!r&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(YD,e,u),D.add(I.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||n<=l)&&!this.fsw._symlinkPaths.has(o)){if(!r&&(await this._handleRead(e,s,i,r,e,n,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(E,p)=>{p&&p.mtimeMs===0||this._handleRead(E,!1,i,r,e,n,c)})}return f}async _addToNodeFs(e,u,s,n,r){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const o=this.fsw._getWatchHelpers(e,n);!o.hasGlob&&s&&(o.hasGlob=s.hasGlob,o.globFilter=s.globFilter,o.filterPath=D=>s.filterPath(D),o.filterDir=D=>s.filterDir(D));try{const D=await sa[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,D))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(ZD)&&!e.includes(QD);let c;if(D.isDirectory()){const f=I.resolve(e),l=a?await eu(e):e;if(this.fsw.closed||(c=await this._handleDir(o.watchPath,D,u,n,r,o,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(D.isSymbolicLink()){const f=a?await eu(e):e;if(this.fsw.closed)return;const l=I.dirname(o.watchPath);if(this.fsw._getWatchedDir(l).add(o.watchPath),this.fsw._emit(nt,o.watchPath,D),c=await this._handleDir(l,D,u,n,e,o,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(I.resolve(e),f)}else c=this._handleFile(o.watchPath,D,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(D){if(this.fsw._handleError(D))return i(),e}}};var Da=oa,su={exports:{}};const nu=te,P=K,{promisify:ru}=me;let Fe;try{Fe=ht("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(Fe){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(Fe=void 0)}}const{EV_ADD:iu,EV_CHANGE:aa,EV_ADD_DIR:nn,EV_UNLINK:ot,EV_ERROR:la,STR_DATA:ca,STR_END:fa,FSEVENT_CREATED:ha,FSEVENT_MODIFIED:da,FSEVENT_DELETED:Ea,FSEVENT_MOVED:pa,FSEVENT_UNKNOWN:Ca,FSEVENT_TYPE_FILE:Fa,FSEVENT_TYPE_DIRECTORY:Te,FSEVENT_TYPE_SYMLINK:rn,ROOT_GLOBSTAR:on,DIR_SUFFIX:ga,DOT_SLASH:Dn,FUNCTION_TYPE:ou,EMPTY_FN:ma,IDENTITY_FN:_a}=ut,Aa=t=>isNaN(t)?{}:{depth:t},Du=ru(nu.stat),ya=ru(nu.lstat),an=ru(nu.realpath),wa={stat:Du,lstat:ya},le=new Map,Ra=10,ba=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),va=(t,e)=>({stop:Fe.watch(t,e)});function Ba(t,e,u,s){let n=P.extname(e)?P.dirname(e):e;const r=P.dirname(n);let i=le.get(n);Sa(r)&&(n=r);const o=P.resolve(t),D=o!==e,a=(f,l,E)=>{D&&(f=f.replace(e,o)),(f===o||!f.indexOf(o+P.sep))&&u(f,l,E)};let c=!1;for(const f of le.keys())if(e.indexOf(P.resolve(f)+P.sep)===0){n=f,i=le.get(n),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:s,watcher:va(n,(f,l)=>{if(!i.listeners.size)return;const E=Fe.getInfo(f,l);i.listeners.forEach(p=>{p(f,l,E)}),i.rawEmitter(E.event,f,E)})},le.set(n,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(le.delete(n),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const Sa=t=>{let e=0;for(const u of le.keys())if(u.indexOf(t)===0&&(e++,e>=Ra))return!0;return!1},$a=()=>Fe&&le.size<128,au=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=P.dirname(t))!==e;)u++;return u},ln=(t,e)=>t.type===Te&&e.isDirectory()||t.type===rn&&e.isSymbolicLink()||t.type===Fa&&e.isFile();let Ta=class{constructor(e){this.fsw=e}checkIgnored(e,u){const s=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return s.add(e),u&&u.isDirectory()&&s.add(e+on),!0;s.delete(e),s.delete(e+on)}addOrChange(e,u,s,n,r,i,o,D){const a=r.has(i)?aa:iu;this.handleEvent(a,e,u,s,n,r,i,o,D)}async checkExists(e,u,s,n,r,i,o,D){try{const a=await Du(e);if(this.fsw.closed)return;ln(o,a)?this.addOrChange(e,u,s,n,r,i,o,D):this.handleEvent(ot,e,u,s,n,r,i,o,D)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,s,n,r,i,o,D):this.handleEvent(ot,e,u,s,n,r,i,o,D)}}handleEvent(e,u,s,n,r,i,o,D,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===ot){const c=D.type===Te;(c||i.has(o))&&this.fsw._remove(r,o,c)}else{if(e===iu){if(D.type===Te&&this.fsw._getWatchedDir(u),D.type===rn&&a.followSymlinks){const f=a.depth===void 0?void 0:au(s,n)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(r).add(o)}const c=D.type===Te?e+ga:e;this.fsw._emit(c,u),c===nn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,s,n){if(this.fsw.closed||this.fsw._isIgnored(e))return;const r=this.fsw.options,o=Ba(e,u,async(D,a,c)=>{if(this.fsw.closed||r.depth!==void 0&&au(D,u)>r.depth)return;const f=s(P.join(e,P.relative(e,D)));if(n&&!n(f))return;const l=P.dirname(f),E=P.basename(f),p=this.fsw._getWatchedDir(c.type===Te?f:l);if(ba.has(a)||c.event===Ca)if(typeof r.ignored===ou){let F;try{F=await Du(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;ln(c,F)?this.addOrChange(f,D,u,l,p,E,c,r):this.handleEvent(ot,f,D,u,l,p,E,c,r)}else this.checkExists(f,D,u,l,p,E,c,r);else switch(c.event){case ha:case da:return this.addOrChange(f,D,u,l,p,E,c,r);case Ea:case pa:return this.checkExists(f,D,u,l,p,E,c,r)}},this.fsw._emitRaw);return this.fsw._emitReady(),o}async _handleFsEventsSymlink(e,u,s,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const r=await an(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(r))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(r||e,i=>{let o=e;return r&&r!==Dn?o=i.replace(r,e):i!==Dn&&(o=P.join(e,i)),s(o)},!1,n)}catch(r){if(this.fsw._handleError(r))return this.fsw._emitReady()}}}emitAdd(e,u,s,n,r){const i=s(e),o=u.isDirectory(),D=this.fsw._getWatchedDir(P.dirname(i)),a=P.basename(i);o&&this.fsw._getWatchedDir(i),!D.has(a)&&(D.add(a),(!n.ignoreInitial||r===!0)&&this.fsw._emit(o?nn:iu,i,u))}initWatch(e,u,s,n){if(this.fsw.closed)return;const r=this._watchWithFsEvents(s.watchPath,P.resolve(e||s.watchPath),n,s.globFilter);this.fsw._addPathCloser(u,r)}async _addToFsEvents(e,u,s,n){if(this.fsw.closed)return;const r=this.fsw.options,i=typeof u===ou?u:_a,o=this.fsw._getWatchHelpers(e);try{const D=await wa[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,D))throw null;if(D.isDirectory()){if(o.globFilter||this.emitAdd(i(e),D,i,r,s),n&&n>r.depth)return;this.fsw._readdirp(o.watchPath,{fileFilter:a=>o.filterPath(a),directoryFilter:a=>o.filterDir(a),...Aa(r.depth-(n||0))}).on(ca,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!o.filterPath(a))return;const c=P.join(o.watchPath,a.path),{fullPath:f}=a;if(o.followSymlinks&&a.stats.isSymbolicLink()){const l=r.depth===void 0?void 0:au(c,P.resolve(o.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,r,s)}).on(la,ma).on(fa,()=>{this.fsw._emitReady()})}else this.emitAdd(o.watchPath,D,i,r,s),this.fsw._emitReady()}catch(D){(!D||this.fsw._handleError(D))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(r.persistent&&s!==!0)if(typeof u===ou)this.initWatch(void 0,e,o,i);else{let D;try{D=await an(o.watchPath)}catch{}this.initWatch(D,e,o,i)}}};su.exports=Ta,su.exports.canUse=$a;var xa=su.exports;const{EventEmitter:Oa}=Ln,lu=te,v=K,{promisify:cn}=me,Na=So,cu=Ho.default,Ha=zo,fu=Ts,La=HD,Ia=bs,Pa=Da,fn=xa,{EV_ALL:hu,EV_READY:ka,EV_ADD:Dt,EV_CHANGE:xe,EV_UNLINK:hn,EV_ADD_DIR:Ma,EV_UNLINK_DIR:Wa,EV_RAW:Ga,EV_ERROR:du,STR_CLOSE:ja,STR_END:Ua,BACK_SLASH_RE:Ka,DOUBLE_SLASH_RE:dn,SLASH_OR_BACK_SLASH_RE:Va,DOT_RE:za,REPLACER_RE:Ya,SLASH:Eu,SLASH_SLASH:qa,BRACE_START:Xa,BANG:pu,ONE_DOT:En,TWO_DOTS:Qa,GLOBSTAR:Za,SLASH_GLOBSTAR:Cu,ANYMATCH_OPTS:Fu,STRING_TYPE:gu,FUNCTION_TYPE:Ja,EMPTY_STR:mu,EMPTY_FN:el,isWindows:tl,isMacos:ul,isIBMi:sl}=ut,nl=cn(lu.stat),rl=cn(lu.readdir),_u=(t=[])=>Array.isArray(t)?t:[t],pn=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?pn(u,e):e.push(u)}),e),Cn=t=>{const e=pn(_u(t));if(!e.every(u=>typeof u===gu))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(gn)},Fn=t=>{let e=t.replace(Ka,Eu),u=!1;for(e.startsWith(qa)&&(u=!0);e.match(dn);)e=e.replace(dn,Eu);return u&&(e=Eu+e),e},gn=t=>Fn(v.normalize(Fn(t))),mn=(t=mu)=>e=>typeof e!==gu?e:gn(v.isAbsolute(e)?e:v.join(t,e)),il=(t,e)=>v.isAbsolute(t)?t:t.startsWith(pu)?pu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class ol{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;u&&e!==En&&e!==Qa&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const s=this.path;try{await rl(s)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(s),v.basename(s))}}has(e){const{items:u}=this;if(u)return u.has(e)}getChildren(){const{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const Dl="stat",al="lstat";class ll{constructor(e,u,s,n){this.fsw=n,this.path=e=e.replace(Ya,mu),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===mu&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&s?void 0:!1,this.globFilter=this.hasGlob?cu(e,void 0,Fu):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(r=>{r.length>1&&r.pop()}),this.followSymlinks=s,this.statMethod=s?Dl:al}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const s=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===Ja?this.globFilter(s):!0)&&this.fsw._isntIgnored(s,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Xa)?La.expand(e):[e]).forEach(n=>{u.push(v.relative(this.watchPath,n).split(Va))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let s=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((r,i)=>(r===Za&&(s=!0),s||!u[0][i]||cu(r,u[0][i],Fu))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class cl extends Oa{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),fn.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=ul),sl&&(u.usePolling=!0);const n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){const D=n.toLowerCase();D==="false"||D==="0"?u.usePolling=!1:D==="true"||D==="1"?u.usePolling=!0:u.usePolling=!!D}const r=process.env.CHOKIDAR_INTERVAL;r&&(u.interval=Number.parseInt(r,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=_u(u.ignored));let o=0;this._emitReady=()=>{o++,o>=this._readyCount&&(this._emitReady=el,this._readyEmitted=!0,process.nextTick(()=>this.emit(ka)))},this._emitRaw=(...D)=>this.emit(Ga,...D),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new fn(this):this._nodeFsHandler=new Pa(this),Object.freeze(u)}add(e,u,s){const{cwd:n,disableGlobbing:r}=this.options;this.closed=!1;let i=Cn(e);return n&&(i=i.map(o=>{const D=il(o,n);return r||!fu(o)?D:Ia(D)})),i=i.filter(o=>o.startsWith(pu)?(this._ignoredPaths.add(o.slice(1)),!1):(this._ignoredPaths.delete(o),this._ignoredPaths.delete(o+Cu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(o=>this._fsEventsHandler._addToFsEvents(o))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async o=>{const D=await this._nodeFsHandler._addToNodeFs(o,!s,0,0,u);return D&&this._emitReady(),D})).then(o=>{this.closed||o.filter(D=>D).forEach(D=>{this.add(v.dirname(D),v.basename(u||D))})})),this}unwatch(e){if(this.closed)return this;const u=Cn(e),{cwd:s}=this.options;return u.forEach(n=>{!v.isAbsolute(n)&&!this._closers.has(n)&&(s&&(n=v.join(s,n)),n=v.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+Cu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(s=>{const n=s();n instanceof Promise&&e.push(n)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,s)=>{const n=this.options.cwd?v.relative(this.options.cwd,s):s;e[n||En]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==du&&this.emit(hu,...u)}async _emit(e,u,s,n,r){if(this.closed)return;const i=this.options;tl&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const o=[e,u];r!==void 0?o.push(s,n,r):n!==void 0?o.push(s,n):s!==void 0&&o.push(s);const D=i.awaitWriteFinish;let a;if(D&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===hn)return this._pendingUnlinks.set(u,o),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(hu,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===Dt&&this._pendingUnlinks.has(u)&&(e=o[0]=xe,this._pendingUnlinks.delete(u))}if(D&&(e===Dt||e===xe)&&this._readyEmitted){const c=(f,l)=>{f?(e=o[0]=du,o[1]=f,this.emitWithAll(e,o)):l&&(o.length>2?o[2]=l:o.push(l),this.emitWithAll(e,o))};return this._awaitWriteFinish(u,D.stabilityThreshold,e,c),this}if(e===xe&&!this._throttle(xe,u,50))return this;if(i.alwaysStat&&s===void 0&&(e===Dt||e===Ma||e===xe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await nl(c)}catch{}if(!f||this.closed)return;o.push(f)}return this.emitWithAll(e,o),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(du,e),e||this.closed}_throttle(e,u,s){this._throttled.has(e)||this._throttled.set(e,new Map);const n=this._throttled.get(e),r=n.get(u);if(r)return r.count++,!1;let i;const o=()=>{const a=n.get(u),c=a?a.count:0;return n.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(o,s);const D={timeoutObject:i,clear:o,count:0};return n.set(u,D),D}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,s,n){let r,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const o=new Date,D=a=>{lu.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&n(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const E=this._pendingWrites.get(e);l-E.lastChange>=u?(this._pendingWrites.delete(e),n(void 0,f)):r=setTimeout(D,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:o,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(r),s)}),r=setTimeout(D,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&za.test(e))return!0;if(!this._userIgnored){const{cwd:s}=this.options,n=this.options.ignored,r=n&&n.map(mn(s)),i=_u(r).filter(D=>typeof D===gu&&!fu(D)).map(D=>D+Cu),o=this._getGlobIgnored().map(mn(s)).concat(r,i);this._userIgnored=cu(o,void 0,Fu)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const s=u||this.options.disableGlobbing||!fu(e)?e:Ha(e),n=this.options.followSymlinks;return new ll(e,s,n,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new ol(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const s=(e&&Number.parseInt(e.mode,10))&511;return!!(4&Number.parseInt(s.toString(8)[0],10))}_remove(e,u,s){const n=v.join(e,u),r=v.resolve(n);if(s=s!=null?s:this._watched.has(n)||this._watched.has(r),!this._throttle("remove",n,100))return;!s&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(n).getChildren().forEach(l=>this._remove(n,l));const D=this._getWatchedDir(e),a=D.has(u);D.remove(u),this._symlinkPaths.has(r)&&this._symlinkPaths.delete(r);let c=n;if(this.options.cwd&&(c=v.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===Dt)return;this._watched.delete(n),this._watched.delete(r);const f=s?Wa:hn;a&&!this._isIgnored(n)&&this._emit(f,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);u&&(u.forEach(s=>s()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let s=this._closers.get(e);s||(s=[],this._closers.set(e,s)),s.push(u)}_readdirp(e,u){if(this.closed)return;const s={type:hu,alwaysStat:!0,lstat:!0,...u};let n=Na(e,s);return this._streams.add(n),n.once(ja,()=>{n=void 0}),n.once(Ua,()=>{n&&(this._streams.delete(n),n=void 0)}),n}}const fl=(t,e)=>{const u=new cl(e);return u.add(t),u};var hl=fl;let ce=!0;const ge=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Oe=0;if(ge.process&&ge.process.env&&ge.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,NO_COLOR:u,TERM:s,COLORTERM:n}=ge.process.env;e||u||t==="0"?ce=!1:t==="1"||t==="2"||t==="3"?ce=!0:s==="dumb"?ce=!1:"CI"in ge.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in ge.process.env)?ce=!0:ce=process.stdout.isTTY,ce&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?Oe=3:s&&(s.endsWith("-256color")||s.endsWith("256"))?Oe=2:Oe=1)}let _n={enabled:ce,supportLevel:Oe};function Ne(t,e,u=1){const s=`\x1B[${t}m`,n=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return i=>_n.enabled&&_n.supportLevel>=u?s+(""+i).replace(r,s)+n:""+i}const He=Ne(33,39),dl=Ne(90,39),El=Ne(92,39),pl=Ne(95,39),Cl=Ne(96,39),at=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}},An=(t,e=process.argv.slice(2))=>(Ru(t,e,{ignore:at()}),e),Fl=t=>{let e=Buffer.alloc(0);return u=>{for(e=Buffer.concat([e,u]);e.length>4;){const s=e.readInt32BE(0);if(e.length>=4+s){const n=e.slice(4,4+s);t(n),e=e.slice(4+s)}else break}}},yn=async()=>{const t=Pn.createServer(u=>{u.on("data",Fl(s=>{const n=JSON.parse(s.toString());t.emit("data",n)}))}),e=Mn(process.pid);return await te.promises.mkdir(kn,{recursive:!0}),await new Promise((u,s)=>{t.listen(e,u),t.on("error",s)}),t.unref(),process.on("exit",()=>{if(t.close(),process.platform!=="win32")try{te.rmSync(e)}catch{}}),t},gl=()=>new Date().toLocaleTimeString(),Le=(...t)=>console.log(dl(gl()),Cl("[tsx]"),...t),ml="\x1Bc",_l=(t,e)=>{let u;return function(){u&&clearTimeout(u),u=setTimeout(()=>Reflect.apply(t,this,arguments),e)}},wn={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},Al=ni({name:"watch",parameters:["<script path>"],flags:wn,help:{description:"Run the script and watch for changes"},ignoreArgv:at(!1)},async t=>{const e=An(wn,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let s,n=!1;(({ on() {} })).on("data",l=>{if(l&&typeof l=="object"&&"type"in l&&l.type==="dependency"&&"path"in l&&typeof l.path=="string"){const E=l.path.startsWith("file:")?xn(l.path):l.path;K.isAbsolute(E)&&f.add(E)}});const i=()=>{if(!n)return os(e,u)};let o=!1;const D=async(l,E="SIGTERM",p=5e3)=>{let F=!1;const A=new Promise(B=>{l.on("exit",N=>{F=!0,o=!1,B(N)})});return o=!0,l.kill(E),setTimeout(()=>{F||(Le(He(`Process didn't exit in ${Math.floor(p/1e3)}s. Force killing...`)),l.kill("SIGKILL"))},p),await A},a=_l(async(l,E)=>{const p=l?`${l?pl(l):""}${E?` in ${El(`./${E}`)}`:""}`:"";if(o){Le(p,He("Process hasn't exited. Killing process...")),s.kill("SIGKILL");return}s&&(s.exitCode===null?(Le(p,He("Restarting...")),await D(s)):Le(p,He("Rerunning...")),u.clearScreen&&process.stdout.write(ml)),s=i()},100);a();const c=l=>{n=!0,(s==null?void 0:s.exitCode)===null?(o&&Le(He("Previous process hasn't exited yet. Force killing...")),D(s,o?"SIGKILL":l).then(E=>{process.exit(E!=null?E:0)},()=>{})):process.exit(ft.signals[l])};process.on("SIGINT",c),process.on("SIGTERM",c);const f=hl(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",a);process.stdin.on("data",()=>a("Return key"))}),yl=(t,e)=>{let u;e.on("data",r=>{r&&r.type==="signal"&&u&&u(r.signal)});const s=()=>{const r=new Promise(i=>{setTimeout(()=>i(void 0),30),u=i});return r.then(()=>{u=void 0},()=>{}),r},n=async r=>{await s()!==r&&(t.kill(r),await s()!==r&&(t.on("exit",()=>{const D=ft.signals[r];process.exit(128+D)}),t.kill("SIGKILL")))};process.on("SIGINT",n),process.on("SIGTERM",n)},Rn={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};Ku({name:"tsx",parameters:["[script path]"],commands:[Al],flags:{...Rn,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:at()},async t=>{t.flags.version?process.stdout.write(`tsx v${$n}
 node `):t.flags.help&&(t.showHelp({description:"Node.js runtime enhanced with esbuild for loading TypeScript & ESM"}),console.log(`${"-".repeat(45)}
-`));const e={eval:{type:String,alias:"e"},print:{type:String,alias:"p"}},{_:u,flags:s}=Ku({flags:{...e,inputType:String,test:Boolean},help:!1,ignoreArgv:at(!1)}),n=An({...Rn,...e}),i=["print","eval"].find(a=>!!s[a]);if(i){const{inputType:a}=s,c=s[i],f=Sn(c,{loader:"default",sourcefile:"/eval.ts",format:a==="module"?"esm":"cjs"});n.unshift(`--${i}`,f.code)}yu(Hn)&&s.test&&u.length===0&&n.push("**/{test,test/**/*,test-*,*[.-_]test}.?(c|m)@(t|j)s");const o=await yn(),D=os(n,{noCache:!!t.flags.noCache,tsconfigPath:t.flags.tsconfig});yl(D,o),process.send&&D.on("message",a=>{process.send(a)}),D.send&&process.on("message",a=>{D.send(a)}),D.on("close",a=>{a===null&&(a=ft.signals[D.signalCode]+128),process.exit(a)})});
+`));const e={eval:{type:String,alias:"e"},print:{type:String,alias:"p"}},{_:u,flags:s}=Ku({flags:{...e,inputType:String,test:Boolean},help:!1,ignoreArgv:at(!1)}),n=An({...Rn,...e}),i=["print","eval"].find(a=>!!s[a]);if(i){const{inputType:a}=s,c=s[i],f=Sn(c,{loader:"default",sourcefile:"/eval.ts",format:a==="module"?"esm":"cjs"});n.unshift(`--${i}`,f.code)}yu(Hn)&&s.test&&u.length===0&&n.push("**/{test,test/**/*,test-*,*[.-_]test}.?(c|m)@(t|j)s");const o=({ on() {} }),D=os(n,{noCache:!!t.flags.noCache,tsconfigPath:t.flags.tsconfig});yl(D,o),process.send&&D.on("message",a=>{process.send(a)}),D.send&&process.on("message",a=>{D.send(a)}),D.on("close",a=>{a===null&&(a=ft.signals[D.signalCode]+128),process.exit(a)})});
diff --git a/dist/esm/index.cjs b/dist/esm/index.cjs
index 05320e807275c9fcef3401891b15a15e200df860..c0b7127c8d66f8be8d0ad9efd96cea1998aa2783 100755
--- a/dist/esm/index.cjs
+++ b/dist/esm/index.cjs
@@ -1,5 +1,133 @@
+const fs = require('node:fs');
+const path = require('node:path');
+const { isFileEsmSync } = require('is-file-esm-ts');const path = require('path');
+const { createTildeImportExpander } = require('tilde-imports');
+const { isGlobSpecifier, createGlobfileManager } = require('glob-imports');
+const { getMonorepoDirpath } = require('get-monorepo-root');
+const { exports: resolveExports } = require('resolve.exports');
+const { getMonorepoPackages } = require('monorepo-packages');
+const { pathToFileURL, fileURLToPath } = require('node:url');
+const monorepoDirpath = getMonorepoDirpath(__dirname);
+if (monorepoDirpath === undefined) {
+	throw new Error('Could not find monorepo root');
+}
+
+const monorepoPackages = getMonorepoPackages({
+	monorepoDirpath
+});
+const expandTildeImport = createTildeImportExpander({
+	monorepoDirpath
+});
+const { getGlobfileContents, getGlobfilePath } = createGlobfileManager({
+	monorepoDirpath
+});
 "use strict";var O=require("worker_threads"),p=require("../node-features-c450ed54.cjs"),M=require("module"),v=require("../source-map.cjs"),h=require("path"),g=require("url"),R=require("../index-5d1f01e6.cjs"),L=require("../resolve-ts-path-3fca13b7.cjs"),N=require("../client-2f0df4a6.cjs"),d=require("get-tsconfig"),E=require("fs");require("esbuild"),require("crypto"),require("os"),require("../temporary-directory-2a027842.cjs"),require("net"),require("../get-pipe-path-86e97fc9.cjs");var f=typeof document<"u"?document.currentScript:null;const D=()=>{v.installSourceMapSupport(),M.register("./index.mjs",{parentURL:typeof document>"u"?require("url").pathToFileURL(__filename).href:f&&f.src||new URL("esm/index.cjs",document.baseURI).href,data:!0})},m=new Map;async function b(e){if(m.has(e))return m.get(e);if(!await E.promises.access(e).then(()=>!0,()=>!1)){m.set(e,void 0);return}const r=await E.promises.readFile(e,"utf8");try{const a=JSON.parse(r);return m.set(e,a),a}catch{throw new Error(`Error parsing: ${e}`)}}async function x(e){let t=new URL("package.json",e);for(;!t.pathname.endsWith("/node_modules/package.json");){const r=g.fileURLToPath(t),a=await b(r);if(a)return a;const n=t;if(t=new URL("../package.json",t),t.pathname===n.pathname)break}}async function A(e){var t;const r=await x(e);return(t=r==null?void 0:r.type)!=null?t:"commonjs"}const l=process.env.TSX_TSCONFIG_PATH?{path:h.resolve(process.env.TSX_TSCONFIG_PATH),config:d.parseTsconfig(process.env.TSX_TSCONFIG_PATH)}:d.getTsconfig(),I=l&&d.createFilesMatcher(l),q=l&&d.createPathsMatcher(l),S="file://",y=/\.([cm]?ts|[tj]sx)($|\?)/,J=/\.json(?:$|\?)/,C=e=>{const t=h.extname(e);if(t===".json")return"json";if(t===".mjs"||t===".mts")return"module";if(t===".cjs"||t===".cts")return"commonjs"},W=e=>{const t=C(e);if(t)return t;if(y.test(e))return A(e)},k=v.installSourceMapSupport(),U=/\/(?:$|\?)/,G=async e=>{if(!e)throw new Error(`tsx must be loaded with --import instead of --loader
 The --loader flag was deprecated in Node v20.6.0 and v18.19.0`)},H=()=>`
 const require = getBuiltin('module').createRequire("${typeof document>"u"?require("url").pathToFileURL(__filename).href:f&&f.src||new URL("esm/index.cjs",document.baseURI).href}");
 require('../source-map.cjs').installSourceMapSupport();
-`,w=async(e,t,r)=>{const a=await e(t,r);return!a.format&&a.url.startsWith(S)&&(a.format=await W(a.url)),a},X=[".js",".json",".ts",".tsx",".jsx"];async function _(e,t,r){const[a,n]=e.split("?");let c;for(const o of X)try{return await w(r,a+o+(n?`?${n}`:""),t)}catch(s){if(c===void 0&&s instanceof Error){const{message:i}=s;s.message=s.message.replace(`${o}'`,"'"),s.stack=s.stack.replace(i,s.message),c=s}}throw c}async function j(e,t,r){const a=U.test(e),n=a?"index":"/index",[c,o]=e.split("?");try{return await _(c+n+(o?`?${o}`:""),t,r)}catch(s){if(!a)try{return await _(e,t,r)}catch{}const i=s,{message:u}=i;throw i.message=i.message.replace(`${n.replace("/",h.sep)}'`,"'"),i.stack=i.stack.replace(u,i.message),i}}const $=/^\.{1,2}\//,F=async function(e,t,r,a){var n;if(U.test(e))return await j(e,t,r);const c=e.startsWith(S)||$.test(e);if(q&&!c&&!((n=t.parentURL)!=null&&n.includes("/node_modules/"))){const o=q(e);for(const s of o)try{return await F(g.pathToFileURL(s).toString(),t,r)}catch{}}if(y.test(t.parentURL)){const o=L.resolveTsPath(e);if(o)for(const s of o)try{return await w(r,s,t)}catch(i){const{code:u}=i;if(u!=="ERR_MODULE_NOT_FOUND"&&u!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw i}}try{return await w(r,e,t)}catch(o){if(o instanceof Error&&!a){const{code:s}=o;if(s==="ERR_UNSUPPORTED_DIR_IMPORT")try{return await j(e,t,r)}catch(i){if(i.code!=="ERR_PACKAGE_IMPORT_NOT_DEFINED")throw i}if(s==="ERR_MODULE_NOT_FOUND")try{return await _(e,t,r)}catch{}}throw o}};let T;N.connectingToServer.then(e=>{T=e},()=>{});const P=p.isFeatureSupported(p.importAttributes)?"importAttributes":"importAssertions",z=async function(e,t,r){var a;T&&T({type:"dependency",path:e}),J.test(e)&&(t[P]||(t[P]={}),t[P].type="json");const n=await r(e,t);if(!n.source)return n;const c=e.startsWith("file://")?g.fileURLToPath(e):e,o=n.source.toString();if(n.format==="json"||y.test(e)){const s=await R.transform(o,c,{tsconfigRaw:(a=I)==null?void 0:a(c)});return{format:"module",source:k(s)}}if(n.format==="module"){const s=R.transformDynamicImport(c,o);s&&(n.source=k(s))}return n};p.isFeatureSupported(p.moduleRegister)&&O.isMainThread&&D(),exports.globalPreload=H,exports.initialize=G,exports.load=z,exports.resolve=F;
+`,w=async(e,t,r)=>{const a=await e(t,r);return!a.format&&a.url.startsWith(S)&&(a.format=await W(a.url)),a},X=[".js",".json",".ts",".tsx",".jsx"];async function _(e,t,r){const[a,n]=e.split("?");let c;for(const o of X)try{return await w(r,a+o+(n?`?${n}`:""),t)}catch(s){if(c===void 0&&s instanceof Error){const{message:i}=s;s.message=s.message.replace(`${o}'`,"'"),s.stack=s.stack.replace(i,s.message),c=s}}throw c}async function j(e,t,r){const a=U.test(e),n=a?"index":"/index",[c,o]=e.split("?");try{return await _(c+n+(o?`?${o}`:""),t,r)}catch(s){if(!a)try{return await _(e,t,r)}catch{}const i=s,{message:u}=i;throw i.message=i.message.replace(`${n.replace("/",h.sep)}'`,"'"),i.stack=i.stack.replace(u,i.message),i}}const $=/^\.{1,2}\//,F=async function(e,t,r,a){
+	let [specifier, context, defaultResolve, recursiveCall] = [e,t,r,a];
+	if (specifier.includes('/node_modules/')) {
+		return defaultResolve(specifier, context);
+	}
+
+	// Support tilde alias imports
+	if (specifier.startsWith('~') && context.parentURL !== undefined) {
+		const importerFilepath = fileURLToPath(context.parentURL);
+		return {
+			url: pathToFileURL(
+				expandTildeImport({
+					importSpecifier: specifier,
+					importerFilepath
+				})
+			).toString(),
+			format: 'module',
+			shortCircuit: true
+		};
+	}
+
+	// Support glob imports
+	if (isGlobSpecifier(specifier) && context.parentURL !== undefined) {
+		const importerFilepath = fileURLToPath(context.parentURL);
+		const url = pathToFileURL(
+			getGlobfilePath({
+				globfileModuleSpecifier: specifier,
+				importerFilepath
+			})
+		).toString();
+
+		return {
+			url,
+			format: 'module',
+			shortCircuit: true
+		};
+	}
+
+	if (specifier.startsWith('@-/')) {
+		const packageSlug = specifier.match(/@-\/([^/]+)/)?.[1];
+		if (packageSlug === undefined) {
+			throw new Error(
+				`Could not extract monorepo package slug from "${specifier}"`
+			);
+		}
+
+		const packageMetadata = monorepoPackages[`@-/${packageSlug}`];
+		if (packageMetadata === undefined) {
+			throw new Error(`Could not find monorepo package "${specifier}"`);
+		}
+
+		const { packageDirpath, packageJson } = packageMetadata;
+
+		const relativeImportPath = specifier.replace(`@-/${packageSlug}`, '.');
+		const relativeFilePaths =
+			resolveExports(packageJson, relativeImportPath) ?? [];
+
+		if (relativeFilePaths.length > 0) {
+			return {
+				url: pathToFileURL(
+					path.join(packageDirpath, relativeFilePaths[0])
+				).toString(),
+				format: packageJson.type ?? 'commonjs',
+				shortCircuit: true
+			};
+		}
+	}
+var n;if(U.test(e))return await j(e,t,r);const c=e.startsWith(S)||$.test(e);if(q&&!c&&!((n=t.parentURL)!=null&&n.includes("/node_modules/"))){const o=q(e);for(const s of o)try{return await F(g.pathToFileURL(s).toString(),t,r)}catch{}}if(y.test(t.parentURL)){const o=L.resolveTsPath(e);if(o)for(const s of o)try{return await w(r,s,t)}catch(i){const{code:u}=i;if(u!=="ERR_MODULE_NOT_FOUND"&&u!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw i}}try{return await w(r,e,t)}catch(o){if(o instanceof Error&&!a){const{code:s}=o;if(s==="ERR_UNSUPPORTED_DIR_IMPORT")try{return await j(e,t,r)}catch(i){if(i.code!=="ERR_PACKAGE_IMPORT_NOT_DEFINED")throw i}if(s==="ERR_MODULE_NOT_FOUND")try{return await _(e,t,r)}catch{}}throw o}};let T;N.connectingToServer.then(e=>{T=e},()=>{});const P=p.isFeatureSupported(p.importAttributes)?"importAttributes":"importAssertions",z=async function(e,t,r){
+	let [url, context, defaultLoad] = [e,t,r];
+
+	// If the file doesn't have an extension, we should return the source directly
+	if (url.startsWith('file://') && path.extname(url) === '') {
+		const source = await fs.promises.readFile(fileURLToPath(url), 'utf8');
+		return {
+			format: 'commonjs',
+			source,
+			shortCircuit: true
+		};
+	}
+
+	const globfilePath = path
+		.normalize(url.startsWith('file://') ? fileURLToPath(url) : url)
+		.replace(/^[a-zA-Z]:/, '');
+
+	if (path.basename(globfilePath).startsWith('__virtual__:')) {
+		const globfileContents = getGlobfileContents({
+			globfilePath,
+			filepathType: 'absolute'
+		});
+
+		return {
+			source: globfileContents,
+			format: 'module',
+			shortCircuit: true
+		};
+	}
+var a;T&&T({type:"dependency",path:e}),J.test(e)&&(t[P]||(t[P]={}),t[P].type="json");const n=await r(e,t);if(!n.source)return n;const c=e.startsWith("file://")?g.fileURLToPath(e):e,o=n.source.toString();if(n.format==="json"||y.test(e)){const s=await R.transform(o,c,{tsconfigRaw:(() => {
+	let tsconfig = (a=I)==null?void 0:a(c);
+	return {
+		...tsconfig,
+		compilerOptions: {
+			...tsconfig?.compilerOptions,
+			experimentalDecorators: true
+		}
+	};
+})()});return{format:"module",source:k(s)}}if(n.format==="module"){const s=R.transformDynamicImport(c,o);s&&(n.source=k(s))}return n};p.isFeatureSupported(p.moduleRegister)&&O.isMainThread&&D(),exports.globalPreload=H,exports.initialize=G,exports.load=z,exports.resolve=F;
diff --git a/dist/esm/index.mjs b/dist/esm/index.mjs
index db003e02dcd1917f5a4872b3d6cc771abd778c1f..99c6aa4c4db103479730c070eaa26604562eb8ce 100755
--- a/dist/esm/index.mjs
+++ b/dist/esm/index.mjs
@@ -1,5 +1,152 @@
+import fs from 'node:fs';
+import path from 'node:path';
+import { createRequire } from 'node:module';
+import { isFileEsmSync } from 'is-file-esm-ts';import { createTildeImportExpander } from 'tilde-imports';
+import { isGlobSpecifier, createGlobfileManager } from 'glob-imports';
+import { getMonorepoDirpath } from 'get-monorepo-root';
+import { exports as resolveExports } from 'resolve.exports';
+import { getMonorepoPackages } from 'monorepo-packages';
+import { pathToFileURL, fileURLToPath } from 'node:url';
+const monorepoDirpath = getMonorepoDirpath(import.meta.url);
+if (monorepoDirpath === undefined) {
+	throw new Error('Could not find monorepo root');
+}
+
+const monorepoPackages = getMonorepoPackages({
+	monorepoDirpath
+});
+const expandTildeImport = createTildeImportExpander({
+	monorepoDirpath
+});
+const { getGlobfileContents, getGlobfilePath } = createGlobfileManager({
+	monorepoDirpath
+});
 import{isMainThread as F}from"worker_threads";import{i as w,a as v,m as M}from"../node-features-fb266590.mjs";import N from"module";import{installSourceMapSupport as _}from"../source-map.mjs";import f from"path";import{fileURLToPath as P,pathToFileURL as U}from"url";import{b as D,t as A}from"../index-bd1ceb03.mjs";import{r as J}from"../resolve-ts-path-eb3847f5.mjs";import{c as b}from"../client-e665d820.mjs";import{parseTsconfig as x,getTsconfig as I,createFilesMatcher as L,createPathsMatcher as $}from"get-tsconfig";import T from"fs";import"esbuild";import"crypto";import"os";import"../temporary-directory-04b36185.mjs";import"net";import"../get-pipe-path-b74d9893.mjs";const C=()=>{_(),N.register("./index.mjs",{parentURL:import.meta.url,data:!0})},p=new Map;async function W(t){if(p.has(t))return p.get(t);if(!await T.promises.access(t).then(()=>!0,()=>!1)){p.set(t,void 0);return}const o=await T.promises.readFile(t,"utf8");try{const e=JSON.parse(o);return p.set(t,e),e}catch{throw new Error(`Error parsing: ${t}`)}}async function q(t){let r=new URL("package.json",t);for(;!r.pathname.endsWith("/node_modules/package.json");){const o=P(r),e=await W(o);if(e)return e;const a=r;if(r=new URL("../package.json",r),r.pathname===a.pathname)break}}async function G(t){var r;const o=await q(t);return(r=o==null?void 0:o.type)!=null?r:"commonjs"}const u=process.env.TSX_TSCONFIG_PATH?{path:f.resolve(process.env.TSX_TSCONFIG_PATH),config:x(process.env.TSX_TSCONFIG_PATH)}:I(),H=u&&L(u),E=u&&$(u),k="file://",h=/\.([cm]?ts|[tj]sx)($|\?)/,X=/\.json(?:$|\?)/,K=t=>{const r=f.extname(t);if(r===".json")return"json";if(r===".mjs"||r===".mts")return"module";if(r===".cjs"||r===".cts")return"commonjs"},Q=t=>{const r=K(t);if(r)return r;if(h.test(t))return G(t)},R=_(),S=/\/(?:$|\?)/,z=async t=>{if(!t)throw new Error(`tsx must be loaded with --import instead of --loader
 The --loader flag was deprecated in Node v20.6.0 and v18.19.0`)},B=()=>`
 const require = getBuiltin('module').createRequire("${import.meta.url}");
 require('../source-map.cjs').installSourceMapSupport();
-`,d=async(t,r,o)=>{const e=await t(r,o);return!e.format&&e.url.startsWith(k)&&(e.format=await Q(e.url)),e},V=[".js",".json",".ts",".tsx",".jsx"];async function l(t,r,o){const[e,a]=t.split("?");let c;for(const n of V)try{return await d(o,e+n+(a?`?${a}`:""),r)}catch(s){if(c===void 0&&s instanceof Error){const{message:i}=s;s.message=s.message.replace(`${n}'`,"'"),s.stack=s.stack.replace(i,s.message),c=s}}throw c}async function j(t,r,o){const e=S.test(t),a=e?"index":"/index",[c,n]=t.split("?");try{return await l(c+a+(n?`?${n}`:""),r,o)}catch(s){if(!e)try{return await l(t,r,o)}catch{}const i=s,{message:m}=i;throw i.message=i.message.replace(`${a.replace("/",f.sep)}'`,"'"),i.stack=i.stack.replace(m,i.message),i}}const Y=/^\.{1,2}\//,O=async function(t,r,o,e){var a;if(S.test(t))return await j(t,r,o);const c=t.startsWith(k)||Y.test(t);if(E&&!c&&!((a=r.parentURL)!=null&&a.includes("/node_modules/"))){const n=E(t);for(const s of n)try{return await O(U(s).toString(),r,o)}catch{}}if(h.test(r.parentURL)){const n=J(t);if(n)for(const s of n)try{return await d(o,s,r)}catch(i){const{code:m}=i;if(m!=="ERR_MODULE_NOT_FOUND"&&m!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw i}}try{return await d(o,t,r)}catch(n){if(n instanceof Error&&!e){const{code:s}=n;if(s==="ERR_UNSUPPORTED_DIR_IMPORT")try{return await j(t,r,o)}catch(i){if(i.code!=="ERR_PACKAGE_IMPORT_NOT_DEFINED")throw i}if(s==="ERR_MODULE_NOT_FOUND")try{return await l(t,r,o)}catch{}}throw n}};let g;b.then(t=>{g=t},()=>{});const y=w(v)?"importAttributes":"importAssertions",Z=async function(t,r,o){var e;g&&g({type:"dependency",path:t}),X.test(t)&&(r[y]||(r[y]={}),r[y].type="json");const a=await o(t,r);if(!a.source)return a;const c=t.startsWith("file://")?P(t):t,n=a.source.toString();if(a.format==="json"||h.test(t)){const s=await D(n,c,{tsconfigRaw:(e=H)==null?void 0:e(c)});return{format:"module",source:R(s)}}if(a.format==="module"){const s=A(c,n);s&&(a.source=R(s))}return a};w(M)&&F&&C();export{B as globalPreload,z as initialize,Z as load,O as resolve};
+`,d=async(t,r,o)=>{const e=await t(r,o);return!e.format&&e.url.startsWith(k)&&(e.format=await Q(e.url)),e},V=[".js",".json",".ts",".tsx",".jsx"];async function l(t,r,o){const[e,a]=t.split("?");let c;for(const n of V)try{return await d(o,e+n+(a?`?${a}`:""),r)}catch(s){if(c===void 0&&s instanceof Error){const{message:i}=s;s.message=s.message.replace(`${n}'`,"'"),s.stack=s.stack.replace(i,s.message),c=s}}throw c}async function j(t,r,o){const e=S.test(t),a=e?"index":"/index",[c,n]=t.split("?");try{return await l(c+a+(n?`?${n}`:""),r,o)}catch(s){if(!e)try{return await l(t,r,o)}catch{}const i=s,{message:m}=i;throw i.message=i.message.replace(`${a.replace("/",f.sep)}'`,"'"),i.stack=i.stack.replace(m,i.message),i}}const Y=/^\.{1,2}\//,O=async function(t,r,o,e){
+	let [specifier, context, defaultResolve, recursiveCall] = [t,r,o,e];
+	if (specifier.includes('/node_modules/')) {
+		return defaultResolve(specifier, context);
+	}
+
+	// Support tilde alias imports
+	if (specifier.startsWith('~') && context.parentURL !== undefined) {
+		const importerFilepath = fileURLToPath(context.parentURL);
+		return {
+			url: pathToFileURL(
+				expandTildeImport({
+					importSpecifier: specifier,
+					importerFilepath
+				})
+			).toString(),
+			format: 'module',
+			shortCircuit: true
+		};
+	}
+
+	// Support glob imports
+	if (isGlobSpecifier(specifier) && context.parentURL !== undefined) {
+		const importerFilepath = fileURLToPath(context.parentURL);
+		const url = pathToFileURL(
+			getGlobfilePath({
+				globfileModuleSpecifier: specifier,
+				importerFilepath
+			})
+		).toString();
+
+		return {
+			url,
+			format: 'module',
+			shortCircuit: true
+		};
+	}
+
+	if (specifier.startsWith('@-/')) {
+		const packageSlug = specifier.match(/@-\/([^/]+)/)?.[1];
+		if (packageSlug === undefined) {
+			throw new Error(
+				`Could not extract monorepo package slug from "${specifier}"`
+			);
+		}
+
+		const packageMetadata = monorepoPackages[`@-/${packageSlug}`];
+		if (packageMetadata === undefined) {
+			throw new Error(`Could not find monorepo package "${specifier}"`);
+		}
+
+		const { packageDirpath, packageJson } = packageMetadata;
+
+		const relativeImportPath = specifier.replace(`@-/${packageSlug}`, '.');
+		const relativeFilePaths =
+			resolveExports(packageJson, relativeImportPath) ?? [];
+
+		if (relativeFilePaths.length > 0) {
+			return {
+				url: pathToFileURL(
+					path.join(packageDirpath, relativeFilePaths[0])
+				).toString(),
+				format: packageJson.type ?? 'commonjs',
+				shortCircuit: true
+			};
+		}
+	}
+var a;if(S.test(t))return await j(t,r,o);const c=t.startsWith(k)||Y.test(t);if(E&&!c&&!((a=r.parentURL)!=null&&a.includes("/node_modules/"))){const n=E(t);for(const s of n)try{return await O(U(s).toString(),r,o)}catch{}}if(h.test(r.parentURL)){const n=J(t);if(n)for(const s of n)try{return await d(o,s,r)}catch(i){const{code:m}=i;if(m!=="ERR_MODULE_NOT_FOUND"&&m!=="ERR_PACKAGE_PATH_NOT_EXPORTED")throw i}}try{return await d(o,t,r)}catch(n){if(n instanceof Error&&!e){const{code:s}=n;if(s==="ERR_UNSUPPORTED_DIR_IMPORT")try{return await j(t,r,o)}catch(i){if(i.code!=="ERR_PACKAGE_IMPORT_NOT_DEFINED")throw i}if(s==="ERR_MODULE_NOT_FOUND")try{return await l(t,r,o)}catch{}}throw n}};let g;b.then(t=>{g=t},()=>{});const y=w(v)?"importAttributes":"importAssertions",Z=async function(t,r,o){
+	let [url, context, defaultLoad] = [t,r,o];
+
+	// If the file doesn't have an extension, we should return the source directly
+	if (url.startsWith('file://') && path.extname(url) === '') {
+		const source = await fs.promises.readFile(fileURLToPath(url), 'utf8');
+		return {
+			format: 'commonjs',
+			source,
+			shortCircuit: true
+		};
+	}
+
+	const globfilePath = path
+		.normalize(url.startsWith('file://') ? fileURLToPath(url) : url)
+		.replace(/^[a-zA-Z]:/, '');
+
+	if (path.basename(globfilePath).startsWith('__virtual__:')) {
+		const globfileContents = getGlobfileContents({
+			globfilePath,
+			filepathType: 'absolute'
+		});
+
+		return {
+			source: globfileContents,
+			format: 'module',
+			shortCircuit: true
+		};
+	}
+var e;g&&g({type:"dependency",path:t}),X.test(t)&&(r[y]||(r[y]={}),r[y].type="json");const a=await o(t,r);if(!a.source)return a;const c=t.startsWith("file://")?P(t):t,n=a.source.toString();if(a.format==="json"||h.test(t)){const s=await D(n,c,{tsconfigRaw:(() => {
+	let tsconfig = (e=H)==null?void 0:e(c);
+	return {
+		...tsconfig,
+		compilerOptions: {
+			...tsconfig?.compilerOptions,
+			experimentalDecorators: true
+		}
+	};
+})()});return{format:"module",source:R(s)}}if(a.format==="module"){const s=A(c,n);s&&(a.source=R(s))}return a};w(M)&&F// When the `--import` flag is used, Node.js tries to load the entrypoint using
+// ESM, which breaks for extension-less JavaScript files.
+// Thus, if we detect that the entrypoint is an extension-less file, we
+// short-circuit and load it via CommonJS instead.
+&&(() => {
+	if (process.argv[1] !== undefined && path.extname(process.argv[1]) === '' && fs.existsSync(process.argv[1])) {
+		try {
+			if (isFileEsmSync(process.argv[1])) {
+				import(process.argv[1]);
+			} else {
+				createRequire(import.meta.url)(process.argv[1]);
+			}
+		} catch {
+			createRequire(import.meta.url)(process.argv[1]);
+		}
+	} else {
+		C();
+	}
+})();
+export{B as globalPreload,z as initialize,Z as load,O as resolve};
diff --git a/package.json b/package.json
index f5ca4c0850ae101c8da9c9531b1e66d559a477a4..7ff32addee5da83a657a3d0627126941fd64bb15 100644
--- a/package.json
+++ b/package.json
@@ -37,6 +37,12 @@
     "node": ">=18.0.0"
   },
   "dependencies": {
+	"is-file-esm-ts": "^0.1.6",
+	"tilde-imports": "^3.1.3",
+	"glob-imports": "^3.0.0",
+	"get-monorepo-root": "^1.2.0",
+	"resolve.exports": "^2.0.2",
+	"monorepo-packages": "^1.1.0",
     "esbuild": "~0.19.10",
     "get-tsconfig": "^4.7.2"
   },
